FusionCharts.register("module",["private","modules.renderer.js-gradientlegend",function(){function t(t,e){return function o(t,e){var r,a;for(a in t)G.call(t,a)&&(r=t[a],void 0===e[a]?e[a]=r:"object"==typeof r&&null!==typeof r&&o(r,e[a]))}(t,e),e}function e(t){return O(t?t:B)||B}function o(t){var e=t.fontSize+"";return e?(e=e.replace(/(\d+)(px)*/,"$1px"),t.fontSize=e,t):t}function r(t){return void 0===t||"undefined"==typeof t||null===t||t!==t}function a(t,e){this.carpet=t,this._componentPool=e}function i(t){this.conf=t,this._id="GL_CARPET",this.compositionsByCategory={},this._lSpace=this.group=this.node=void 0,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}function n(){i.apply(this,arguments)}function l(t,e){this.rawText=t,this.conf=e,this._id="GL_CAPTION",this._lSpace=this.bound=this.node=void 0}function s(t,e){this.colorRange=t,this.conf=e,this._id="GL_BODY",this.bound=void 0,this.compositionsByCategory={},this._lSpace=void 0}function h(){s.apply(this,arguments)}function c(t){this.conf=t,this._id="GL_LABELS"}function d(){c.apply(this,arguments)}function p(){c.apply(this,arguments),this._id="GL_VALUES"}function g(){p.apply(this,arguments),this._id="GL_VALUES"}function u(t){this.conf=t,this._id="FL_AXIS",this.markerLine=this.shadow=this.node=void 0,this.compositionsByCategory={}}function f(){u.apply(this,arguments)}function m(t){var e={};this._id="GL_SG1",this.conf=t,e.conf=t,this.extremes=[],this.sliders={},e.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[!1]=new v(!1,e,this._id+"_0"),this.sliders[!0]=new v(!0,e,this._id+"_1")}function v(t,e,o){this.conf=e.conf,this.sliderIndex=t,this.rangeGroup=e.sliderGroup,this._id=o,this.tracker=this.node=void 0,this.currPos=0,this.swing=[]}function b(t,e,o){o=o.components.numberFormatter;var a,i,n,l,s,h;for(this.data=t,this.options=e||{},h=this.mapByPercent=!!t.mapByPercent,this.appender="",i=this.mapByPercent?0:e.min,e=this.mapByPercent?100:e.max,2===t.colorRange.length&&(a=t.colorRange[0],n=t.colorRange[1],l=a.value=r(a.value)?i:a.value,s=n.value=r(n.value)?e:n.value,l===s&&(l=a.value=i,s=n.value=e),a.displayValue=h?l+"%":o.legendValue(l),n.displayValue=h?s+"%":o.legendValue(s)),r(i)&&r(a.value)||r(e)&&r(a.value)||!t.gradient?this._preparationGoneWrong=!0:this._preparationGoneWrong=!1,o=this.colorRange=t.colorRange.sort(function(t,e){return t.value-e.value}),this.valueRatio=void 0,this.values=[],t=0,a=o.length;a>t;t++)this.values.push(o[t].value)}function y(){a.apply(this,arguments)}var k,w,C=this,x=C.hcLib,S=x.pluckNumber,_=x.pluck,A=x.toRaphaelColor,L=x.graphics,F=x.dehashify,R=x.hashify,E=L.convertColor,I=L.RGBtoHex,T=L.HEXtoRGB,P=L.getLightColor,O=L.getValidColor,M="rgba(192,192,192,"+(x.isIE?.002:1e-6)+")",B=x.COLOR_BLACK,G={}.hasOwnProperty,V={};k=function(){function t(t){var e,r,a,i=o.numberFormatter;for(e=0,r=t.length;r>e;e++)(a=t[e].maxvalue)&&(t[e].maxvalue=i.getCleanValue(a))}var o,r,a={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return a.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:A({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},a.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:M,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:M,stroke:"#FFFFFF"}}},a.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){r=t.chart,o=r.components},setConf:function(){},legacyDataParser:function(r,a){var i,n,l,s,h,c,d,p,g,u={},f=o.numberFormatter;if(!r)return!1;for(u.mapByPercent=g=!!S(r.mapbypercent,0),void 0===r.minvalue&&(r.minvalue=void 0!==a.min?g?0:a.min:0),void 0===r.maxvalue&&(r.maxvalue=void 0!==a.max?g?100:a.max:100),i=r.color||[],l=r.code,d=u.colorRange=[],u.gradient=!!S(r.gradient,1),i.length?l=e(l):(l?(s=e(l),l=e()):(l=e(),s=P(l,1)),i.push({code:s,maxvalue:r.maxvalue,label:void 0})),t(i),i=i.sort(function(t,e){return t.maxvalue-e.maxvalue}),s=p=r.minvalue&&f.getCleanValue(r.minvalue),p=(void 0!==s||null!==s)&&(g?s+"%":f.legendValue(s)),d.push({code:F(l),value:s,displayValue:p,label:r.startlabel}),l=0,c=i.length;c>l;l++)n=i[l],h=e(n.code||n.color),s=p=n.maxvalue,isNaN(parseInt(s,10))||(p=(void 0!==s||null!==s)&&(g?s+"%":f.legendValue(s)),d.push(Object({code:F(h),value:s,displayValue:p,label:n.label||n.displayvalue})));return d[d.length-1].label=r.endlabel||n.label,u},getDefaultConf:function(t){return a[t]}}}(),w=function(t){var e=t.chartInstance.id,o=V[e]||(V[e]={});return function(){function r(){var t,e,r,a,i,n;for(t in o)for(e in r=o[t])if(a=r[e],a instanceof Array)for(i=0,n=a.length;n>i;i++)a[i]&&a[i].hide();else a.hide()}var a,i,n={};return a={KEY_RECT:"rect",KEY_TEXT:"text",KEY_GROUP:"group",KEY_CIRCLE:"circle",KEY_PATH:"path"},n[a.KEY_RECT]=function(t){return i.rect(t)},n[a.KEY_TEXT]=function(t){return i.text(t)},n[a.KEY_GROUP]=function(t,e){return i.group(t,e)},n[a.KEY_CIRCLE]=function(t){return i.circle(t)},n[a.KEY_PATH]=function(t,e){return i.path(t,e)},{init:function(t){i=t,r()},emptyPool:function(){o=V[e]={}},getChart:function(){return t},getComponent:function(t,e,r){var a,i,l,s=o[t],h=0;return s||(s=o[t]={}),(i=s[e])&&!(i instanceof Array)||i instanceof Array&&0<i.length?function(){return r?(l=i[h++])?l.show():i[h]=n[e].apply(this,arguments):i.show()}:function(){return r?(a=s[e]||(s[e]=[]),i=n[e].apply(this,arguments),a.push(i),i.show()):s[e]=n[e].apply(this,arguments)}},hideAll:function(){r()},getKeys:function(){return a}}}()},a.prototype.constructor=a,a.prototype.draw=function(t){return t.componentPool=this._componentPool,this.carpet.draw(t)},a.prototype.getLogicalSpace=function(t,e){return t.componentPool=this._componentPool,this.carpet.getLogicalSpace(t,e)},a.prototype.dispose=function(){this.carpet&&this.carpet.group&&this.carpet.group.remove(),this._componentPool.emptyPool()},i.prototype.constructor=i,i.prototype.addCompositions=function(t,e){this.compositionsByCategory[e]=t},i.prototype.getBoundingBox=function(t){var e=this.conf,o=t.refSide,r=t.alignment,a=t.refOffset,i=t.x,n=t.y,e=e.width=o*e.spreadFactor;return!r||void 0!==i&&null!==i||(i=(a+o)/2-e/2),{width:e,height:t.maxOtherSide,x:i,y:n}},i.prototype.getPostCalcDecisions=function(t,e){var o,r=this.conf.padding,a=0;for(o in e)a+=e[o].height||0;t.height=a+2*r.v},i.prototype.getLogicalSpace=function(e,o){var a,i,n,l=this._lSpace,s=this.conf.padding,h=this.compositionsByCategory;n=0;var c,d={},p=0;if(l&&!o)return l.isImpure=!0,l;l=this._lSpace=i=this.getBoundingBox(e),(r(l.x)||r(l.y)||r(l.height)||r(l.width))&&(this.autoRecalculate=!0),l=t(i,{}),l.height-=2*s.v,l.width-=2*s.h,l.x+=s.h,l.y+=s.v;for(c in h)a=h[c],s=t(l,{}),s.y+=n,n=l.height*a.conf.spreadFactor,s.height=n+p,n=a.getLogicalSpace(t(s,{}),e,o),p=s.height-n.height,d[c]=n,n=n.height;return this.getPostCalcDecisions(i,d),this._lSpace=i},i.prototype.setupDragging=function(){var t=this.group,e=0,o=0,r=0,a=0;t.css({cursor:"move"}),t.drag(function(i,n){e=i,o=n,t.attr({transform:"t"+(r+e)+","+(a+o)})},function(){r+=e,a+=o},function(){})},i.prototype.draw=function(t){var e,o,r,a=this.conf,i=this.compositionsByCategory,n=t.paper,l=t.parentGroup,s=t.componentPool,h=s.getChart().get("config","animationObj").duration,c=s.getKeys();this.getLogicalSpace(t,this.autoRecalculate),o=this._lSpace,r=s.getComponent(this._id,c.KEY_GROUP),this.group=l=r(this.groupName,l),l.attr({opacity:0}),l.animate({opacity:1},h,"easeIn"),r=s.getComponent(this._id,c.KEY_RECT),this.node=r(l).attr(o).css(a.style);for(e in i)s=i[e],s.draw(a.captionAlignment,o,{colorRange:t.colorRange,numberFormatter:t.numberFormatter,paper:n,parentLayer:l,smartLabel:t.smartLabel,moveInstructions:this.moveInstructions[e],componentPool:t.componentPool});return a.allowDrag&&this.setupDragging(),this.node},n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.getBoundingBox=function(t){var e=this.conf,o=t.refSide,r=t.alignment,a=t.refOffset,i=t.x,n=t.y,e=e.height=o*e.spreadFactor;return!r||void 0!==n&&null!==n||(n=(a+o)/2-e/2),{width:t.maxOtherSide,height:e,x:i,y:n}},n.prototype.getPostCalcDecisions=function(t,e){var o,r,a=this.conf.padding,n=Number.NEGATIVE_INFINITY,l=this.moveInstructions;i.prototype.getPostCalcDecisions.apply(this,arguments);for(r in e)o=e[r].width,n=o>n?o:n;t.width=n+2*a.h;for(r in e)o=e[r].width,(a=n-o)&&(l[r]="t"+a/2+",0")},l.prototype.constructor=l,l.LEFT={x:function(t,e){return e.x+t.width/2+2}},l.RIGHT={x:function(t,e){return e.x+e.width-t.width/2-2}},l.CENTER={x:function(t,e){return e.x+e.width/2}},l.prototype.getLogicalSpace=function(e,r,a){var i=this.conf.padding,n=this._lSpace,l=this.rawText,s=r.componentPool.getChart();return n&&!a?(n.isImpure=!0,n):(n=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartText:void 0}},a=r.smartLabel,l?(r=t(e,{}),r.height-=2*i.v,r.width-=2*i.h,r.x+=i.h,r.y+=i.v,a.useEllipsesOnOverflow(s.config.useEllipsesWhenOverflow),s=t(this.conf.style,{}),o(s),a.setStyle(s),l=a.getSmartText(l,r.width,r.height),r.height=l.height,r.width=l.width,e.height=l.height+2*i.v,e.width=l.width+2*i.h,n.node.smartText=l,n.node.logicArea=r,n.bound=e):n.bound)},l.prototype.draw=function(){var t,e,o,r,a,i,n,s,h=this.conf.bound||{};return 3<=arguments.length?(r=arguments[0],a=arguments[1],i=arguments[2]):2<=arguments.length&&(r=arguments[0],i=arguments[1]),t=i.parentLayer,n=i.componentPool,s=n.getKeys(),e=n.getComponent(this._id,s.KEY_GROUP),this.group=t=e("legend-caption",t),this.getLogicalSpace(a,i),e=this._lSpace,i=e.node,o=e.bound,e=n.getComponent(this._id,s.KEY_RECT),this.bound=h=e(t).attr(o).css(h.style),r="string"==typeof r?l[r.toUpperCase()].x(i.smartText,a||i.logicArea):r,e=n.getComponent(this._id,s.KEY_TEXT),this.node=e(t).attr({text:i.smartText.text,x:r,y:i.logicArea.y+i.smartText.height/2}).css(this.conf.style),{group:t,bound:h,node:this.node}},s.SC_STACK=["LEGEND_LABEL","LEGEND_AXIS","AXIS_VALUE"],s.DARW_STACK=["AXIS_VALUE","LEGEND_AXIS","LEGEND_LABEL"],s.prototype.constructor=s,s.prototype.addCompositions=function(t,e){this.compositionsByCategory[e]=t},s.prototype.getCompositionPlotAreaFor=function(e){var o;return o=t(e,{}),function(t,r){return t=t||{},o.y+=t.height||0,o.height=e.height*r,o}},s.prototype.getSpaceTaken=function(t){return t.height},s.prototype.updateEffectivePlotArea=function(t,e,o){var r=this.conf.padding;e.height=o,t.height=o+2*r.v},s.prototype.getLogicalSpace=function(e,o,r){var a,i,n,l,h,c=this._lSpace,d=this.conf.padding,p=this.compositionsByCategory,g=0;if(c&&!r)return c.isImpure=!0,c;for(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0}},i=t(e,{}),i.height-=2*d.v,i.width-=2*d.h,i.x+=d.h,i.y+=d.v,n=this.getCompositionPlotAreaFor(i),o.colorRange=this.colorRange,l=0,h=s.SC_STACK.length;h>l;l++)(d=p[s.SC_STACK[l]])&&(a=n(a,d.conf.spreadFactor),a=d.getLogicalSpace(t(a,{}),o,r),g+=this.getSpaceTaken(a));return this.updateEffectivePlotArea(e,i,g),c.node.logicArea=i,c.bound=e},s.prototype.draw=function(){var t,e;e=this.conf.bound.style||{};var o,r,a,i,n,l,h=this.compositionsByCategory;for(3<=arguments.length?(r=arguments[1],i=arguments[2]):2<=arguments.length&&(i=arguments[1]),t=i.parentLayer,a=i.componentPool,n=a.getKeys(),this.getLogicalSpace(r,i),r=this._lSpace,l=a.getComponent(this._id,n.KEY_GROUP),t=l("legend-body",t).attr({transform:"t0,0"}),l=a.getComponent(this._id,n.KEY_RECT),this.bound=e=l(t).attr(r.bound).css(e),i.colorRange=this.colorRange,i.parentLayer=t,a=0,n=s.DARW_STACK.length;n>a;a++)(o=h[s.DARW_STACK[a]])&&o.draw(i);return i.moveInstructions&&t.attr({transform:i.moveInstructions}),{bound:e,group:t}},h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.getCompositionPlotAreaFor=function(e){var o;return o=t(e,{}),function(t,r){return t=t||{},o.x+=t.width||0,o.width=e.width*r,o}},h.prototype.updateEffectivePlotArea=function(t,e,o){var r=this.conf.padding;e.width=o,t.width=o+2*r.h},h.prototype.getSpaceTaken=function(t){return t.width},c.prototype.constructor=c,c.prototype.getEffectivePlotArea=function(t){var e=this.conf.padding;return t.height-=2*e.v,t.width-=2*e.h,t.x+=e.h,t.y+=e.v,this.node=[],t},c.prototype.getLogicalSpace=function(e,r,a){var i,n,l,s,h,c,d,p,g,u,f=this._lSpace,m=this.conf,v=m.padding,b=[],y=0;d=r.componentPool.getChart();var k=[];if(f&&!a)return f.isImpure=!0,f;for(f=r.colorRange,r=r.smartLabel,a=f.getCumulativeValueRatio(),i=f.colorRange,f=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartTexts:[]}},c=f.node.smartTexts,l=t(e,{}),l=this.getEffectivePlotArea(l),r.useEllipsesOnOverflow(d.config.useEllipsesWhenOverflow),m=t(m.style,{}),o(m),r.setStyle(m),d=r.getSmartText("W"),n=0,m=i.length;m>n;n++)(s=i[n].label)?(y++,k.push({oriIndex:n,label:s})):c[n]=void 0;if(m=k.length,0===m)return{height:0,width:0};for(s=h=m>1?(a[k[m-1].oriIndex]-a[k[0].oriIndex])/2*l.width/100:Math.max(a[k[0].oriIndex],100-a[k[0].oriIndex])/2*l.width/100,y=r.getSmartText(k[0].label,s,l.height),y.x=a[k[0].oriIndex]*l.width/100,n=y.x+y.width,b.push(y.height),c[k[0].oriIndex]=y,y=r.getSmartText(k[m-1].label,s,l.height),y.x=a[k[m-1].oriIndex]*l.width/100,i=y.x-y.width,b.push(y.height),c[k[m-1].oriIndex]=y,g=n,n=1;m-1>n;n++)s=k[n].label,u=k[n].oriIndex,y=void 0,h=n+1===m-1?i:a[k[n+1].oriIndex]*l.width/100,p=a[k[n].oriIndex]*l.width/100,h=Math.min(p-g,h-p),h>2*d.width&&(y=r.getSmartText(s,h,l.height),y.x=a[u]*l.width/100,g=h,b.push(y.height)),c[k[n].oriIndex]=y;return b=Math.max.apply(Math,b),l.height=b,e.height=b+2*v.v,f.node.logicArea=l,f.bound=e},c.prototype.draw=function(){var t,e,o=this.conf;e=o.bound&&o.bound.style||{stroke:"none"};var r,a,i,n,l,s,h={};for(2<=arguments.length?(a=arguments[0],n=arguments[1]):1<=arguments.length&&(n=arguments[0]),t=n.parentLayer,n.colorRange.getCumulativeValueRatio(),r=n.componentPool,l=r.getKeys(),this.getLogicalSpace(a,n),i=this._lSpace,a=i.node.logicArea,n=i.node.smartTexts,s=r.getComponent(this._id,l.KEY_GROUP),t=s("legend-labels",t),s=r.getComponent(this._id,l.KEY_RECT),this.bound=e=s(t).attr(i.bound).css(e),t.transform("R0"),s=r.getComponent(this._id,l.KEY_TEXT,!0),l=0,i=n.length;i>l;l++)(r=n[l])&&(h.y=a.y+r.height/2,h.x=l===i-1?a.x+r.x-r.width/2:l?a.x+r.x:a.x+r.x+r.width/2,this.node.push(s(t).attr({text:r.text}).attr(h).css(o.style).transform("R0")));return{group:t,bound:e,node:this.node}},d.prototype=Object.create(c.prototype),d.prototype.constructor=d,d.prototype.getLogicalSpace=function(t){var e;if(t){e=t;var o=e.height;e.height=e.width,e.width=o}return e=c.prototype.getLogicalSpace.apply(this,arguments),{height:e.width,width:e.height}},d.prototype.draw=function(){var t,e,o,r,a;for(o=c.prototype.draw.apply(this,arguments),t=o.bound,e=o.group,t=t.getBBox(),o=o.node,e.transform("R90,"+(t.x+t.height/2)+","+(t.y+t.height/2)),e=0,t=o.length;t>e;e++)r=o[e],a=r.getBBox(),r.transform("R180,"+(a.x+a.width/2)+","+(a.y+a.height/2))},p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.prototype.getLogicalSpace=function(e,r,a){var i,n,l,s,h,c,d,p,g,u,f=this._lSpace,m=this.conf,v=m.padding,b=r.componentPool.getChart(),y=[];if(f&&!a)return f.isImpure=!0,f;for(f=r.colorRange,r=r.smartLabel,a=f.colorRange,l=f.getCumulativeValueRatio(),f=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartTexts:[]}},u=f.node.smartTexts,p=t(e,{}),p.height-=2*v.v,p.width-=2*v.h,p.x+=v.h,p.y+=v.v,r.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow),m=t(m.style,{}),o(m),r.setStyle(m),b=r.getSmartText("W"),m=a.length,c=(l[m-1]-l[0])/2*p.width/100,i=a[0].displayValue,i=r.getSmartText("string"!=typeof i&&void 0!==i&&i.toString()||i,c,p.height),i.x=l[0]*p.width/100,n=i.x+i.width,y.push(i.height),u[0]=i,i=r.getSmartText(a[m-1].displayValue,c,p.height),i.x=l[m-1]*p.width/100,c=i.x-i.width,y.push(i.height),u[m-1]=i,d=n,n=1;m-1>n;n++)i=void 0,g=a[n].displayValue,s=n+1===m-1?c:l[n+1]*p.width/100,h=l[n]*p.width/100,s=Math.min(h-d,s-h),s>1.5*b.width&&(i=r.getSmartText(g,2*s,p.height),i.x=l[n]*p.width/100,d=s,y.push(i.height)),u[n]=i;return y=Math.max.apply(Math,y),p.height=y,e.height=y+2*v.v,f.node.logicArea=p,f.bound=e},p.prototype.draw=function(){var t,e,o,r,a,i,n,l,s=this.conf,h=s.bound&&s.bound.style||{stroke:"none"},c={};for(2<=arguments.length?(r=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),e=i.parentLayer,n=i.colorRange.getCumulativeValueRatio(),o=i.componentPool,t=o.getKeys(),this.getLogicalSpace(r,i),a=this._lSpace,r=a.node.logicArea,i=a.node.smartTexts,l=o.getComponent(this._id,t.KEY_GROUP),e=l("legend-values",e),l=o.getComponent(this._id,t.KEY_RECT),this.bound=h=l(e).attr(a.bound).css(h),l=o.getComponent(this._id,t.KEY_TEXT,!0),t=0,n=n.length;n>t;t++)(o=i[t])&&(c.y=r.y+o.height/2,c.x=t===n-1?r.x+o.x-o.width/2:t?r.x+o.x:r.x+o.x+o.width/2,l(e).attr({text:o.text}).attr(c).css(s.style));return{group:e,bound:h}},g.prototype=Object.create(p.prototype),g.prototype.constructor=g,g.prototype.getLogicalSpace=function(e,r,a){var i,n,l,s,h,c,d,p,g,u,f=this._lSpace,m=this.conf,v=m.padding,b=r.componentPool.getChart(),y=[];if(f&&!a)return f.isImpure=!0,f;for(f=r.colorRange,r=r.smartLabel,a=f.colorRange,n=f.getCumulativeValueRatio(),f=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartTexts:[]}},u=f.node.smartTexts,h=t(e,{}),h.height-=2*v.v,h.width-=2*v.h,h.x+=v.h,h.y+=v.v,r.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow),m=t(m.style,{}),o(m),r.setStyle(m),g=r.getSmartText("W"),b=a.length,c=(n[b-1]-n[0])/2*h.height/100,m=r.getSmartText(a[0].displayValue,h.width,c),m.y=n[0]*h.height/100,i=m.y+m.width,y.push(m.width),u[0]=m,m=r.getSmartText(a[b-1].displayValue,h.width,c),m.y=n[b-1]*h.height/100,c=m.y-m.height,y.push(m.width),u[b-1]=m,d=i,i=1;b-1>i;i++)m=void 0,p=a[i].displayValue,l=i+1===b-1?c:n[i+1]*h.height/100,s=n[i]*h.height/100,l=Math.min(s-d,l-s),l>2*g.height&&(m=r.getSmartText(p,h.width,2*l),m.y=n[i]*h.height/100,d=l,y.push(m.width)),u[i]=m;return y=Math.max.apply(Math,y),h.width=y,e.width=y+2*v.h,f.node.logicArea=h,f.bound=e},g.prototype.draw=function(){var t,e,o=this.conf;e=o.bound&&o.bound.style||{stroke:"none"};var r,a,i,n,l,s,h,c={};for(2<=arguments.length?(r=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),t=i.parentLayer,n=i.colorRange.getCumulativeValueRatio(),l=i.componentPool,s=l.getKeys(),this.getLogicalSpace(r,i),a=this._lSpace,r=a.node.logicArea,i=a.node.smartTexts,h=l.getComponent(this._id,s.KEY_GROUP),t=h("legend-values",t),h=l.getComponent(this._id,s.KEY_RECT),this.bound=e=h(t).attr(a.bound).css(e),h=l.getComponent(this._id,s.KEY_TEXT,!0),l=0,s=n.length;s>l;l++)(n=i[l])&&(c.x=r.x+n.width/2,c.y=l===s-1?r.y+n.y-n.height/2:l?r.y+n.y:r.y+n.y+n.height/2,h(t).attr({text:n.text}).attr(c).css(o.style));return{group:t,bound:e}},u.prototype.constructor=u,u.prototype.addCompositions=function(t,e){this.compositionsByCategory[e]=t},u.prototype.getLogicalSpace=function(e,o,r){o=this._lSpace;var a,i,n=this.conf,l=n.padding;i=n.legendAxisHeight;var s,h=this.compositionsByCategory;return s=0,o&&!r?(o.isImpure=!0,o):(o=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0}},r=t(e,{}),r.height-=2*l.v,r.width-=2*l.h,r.x+=l.h,r.y+=l.v,n=i/2+n.line.offset,a=i/2,(h=h.RANGE)&&(s=h.sliders[!1],s=s.conf.outerCircle.rFactor*i,a+=s=Math.max(s/2-i/2,0)),r.y+=s,r.height=i=a+n+s,e.height=i+2*l.v,o.node.logicArea=r,o.bound=e)},u.prototype.getDrawableAxisArea=function(t){var e=this.conf;return{x:t.x,y:t.y,width:t.width,height:e.legendAxisHeight,r:e.legendAxisHeight/2}},u.prototype.preDrawingRangeParam=function(t){return{y:t.y+t.height/2,calculationBase:t.height,rangeStart:t.x,rangeEnd:t.x+t.width,prop:"y"}},u.prototype.getScaleMarkerPathStr=function(e,o){var r,a,i,n,l=t(e,{}),s=this.conf.line,h="";for(l.x+=l.r,l.width-=2*l.r,n=l.y+l.height,r=0,a=o.length;a>r;r++)i=o[r],i=l.x+i*l.width/100,h+="M"+i+","+(n-s.grooveLength)+"L"+i+","+(n+s.offset);return l=""+("M"+l.x+","+(n+s.offset)+"L"+(l.x+l.width)+","+(n+s.offset)),h+l},u.prototype.getColorGradient=function(t){return{axis:t.getBoxFill(),shadow:A({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},u.prototype.draw=function(){var t,e,o,r,a,i,n,l,s,h=this.conf,c=h.line,d=(h.bound||{}).style||{},p=this.compositionsByCategory;2<=arguments.length?(e=arguments[0],l=arguments[1]):1<=arguments.length&&(l=arguments[0]),t=l.parentLayer,r=l.colorRange,a=r.getCumulativeValueRatio(),s=l.componentPool,i=s.getKeys(),this.getLogicalSpace(e,l),n=this._lSpace,e=s.getComponent(this._id,i.KEY_GROUP),t=e("legend-axis",t),e=s.getComponent(this._id,i.KEY_RECT,!0),this.bound=e(t).attr(n.bound).css(d),d=this.getDrawableAxisArea(n.node.logicArea),r=this.getColorGradient(r),h.style.fill=r.axis,h.shadow.style.fill=r.shadow,this.node=e(t).attr(d).css(h.style),this.shadow=e(t).attr(d).css(h.shadow.style),h=this.getScaleMarkerPathStr(d,a),e=s.getComponent(this._id,i.KEY_PATH),e("M0,0",t).attr({path:h}).css(c.style);for(o in p)switch(c=p[o],o){case"RANGE":i=this.preDrawingRangeParam(d),l[i.prop]=i[i.prop],l.key=i.prop,l.rCalcBase=i.calculationBase,l.parentLayer=t,c.draw(i.rangeStart,i.rangeEnd,l)}},f.prototype=Object.create(u.prototype),f.prototype.constructor=f,f.prototype.getLogicalSpace=function(e,o,r){o=this._lSpace;var a,i,n=this.conf,l=n.padding;i=n.legendAxisHeight;var s,h=this.compositionsByCategory;return s=0,o&&!r?(o.isImpure=!0,o):(o=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0}},r=t(e,{}),r.height-=2*l.v,r.width-=2*l.h,r.x+=l.h,r.y+=l.v,n=i/2+n.line.offset,a=i/2,(h=h.RANGE)&&(s=h.sliders[!1],s=s.conf.outerCircle.rFactor*i,a+=s=Math.max(s/2-i/2,0)),r.x+=s,r.width=i=a+n+s,e.width=i+2*l.v,o.node.logicArea=r,o.bound=e)},f.prototype.getDrawableAxisArea=function(t){var e=this.conf;return{x:t.x,y:t.y,width:e.legendAxisHeight,height:t.height,r:e.legendAxisHeight/2}},f.prototype.getScaleMarkerPathStr=function(e,o){var r,a,i,n,l=t(e,{}),s=this.conf.line,h="";for(l.y+=l.r,l.height-=2*l.r,n=l.x+l.width,r=0,i=o.length;i>r;r++)a=o[r],a=l.y+a*l.height/100,h+="M"+(n-s.grooveLength)+","+a+"L"+(n+s.offset)+","+a;return l=""+("M"+(n+s.offset)+","+l.y+"L"+(n+s.offset)+","+(l.y+l.height)),h+l},f.prototype.getColorGradient=function(t){return{axis:t.getBoxFill(!0),shadow:A({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},f.prototype.preDrawingRangeParam=function(t){return{x:t.x+t.width/2,calculationBase:t.width,rangeStart:t.y,rangeEnd:t.y+t.height,prop:"x"}},m.prototype.constructor=m,m.prototype.initRange=function(t,e){this.extremes[+t.sliderIndex]=e},m.prototype.updateRange=function(t,e){var o=t.sliderIndex;this.sliders[!o].updateSwingRange(o,e)},m.prototype.reset=function(){var t={};t.conf=this.conf,t.sliderGroup=this,this.sliders[!1]=new v(!1,t,this._id+"_0"),this.sliders[!0]=new v(!0,t,this._id+"_1"),this.draw.apply(this,this._drawParams)},m.prototype.clearListeners=function(){this.callbacks.length=0},m.prototype.draw=function(t,e,o){var r=this.sliders,a=r[!1],r=r[!0],i=o.colorRange,n=i.colorRange,l=this._fcChart=o.componentPool.getChart();return this.getValueFormPixel=function(t,e,o,r){var a=(e-t)/(r-o);this.getValueFormPixel=function(e){return t+a*e}},this.updateWhenInMove=function(t,e){this.updateWhenInMove=function(o,r){var a=this.extremes,a=this.getValueFormPixel(o.sliderIndex?a[1]-a[0]+r:r);return a=e?parseFloat(a).toFixed(2)+"%":t.legendValue(a)}},this._drawParams=[t,e,o],this.updateWhenInMove(l.components.numberFormatter,i.mapByPercent),t=a.draw(t,n[0].displayValue,o[o.key],o),t=r.draw(e,n[n.length-1].displayValue,o[o.key],o),a.swing=this.extremes.slice(0),r.swing=this.extremes.slice(0),this.getValueFormPixel(n[0].value,n[n.length-1].value,this.extremes[0],this.extremes[1]),t},m.prototype.registerListener=function(t,e,o){this.callbacks.push({fn:t,context:e,params:o||[]})},m.prototype.updateWhenInRest=function(t,e){var o,r,a,i=this.sliders,n=this.extremes,l=t.sliderIndex,s=this.callbacks;for(l?(o=i[!l].currPos,i=n[1]-n[0]+e):(o=e,i=n[1]-n[0]+i[!l].currPos),n=0,l=s.length;l>n;n++)r=s[n],a=r.params.slice(0),a.unshift(this.getValueFormPixel(i)),a.unshift(this.getValueFormPixel(o)),r.fn.apply(r.context,a)},m.prototype.dragStarted=function(t){var e=this.sliders,o=this.extremes,r=t.conf,a=this._fcChart;C.raiseEvent("legendpointerdragstart",{pointerIndex:+t.sliderIndex,pointers:[{value:this.getValueFormPixel(e[!1].currPos)},{value:this.getValueFormPixel(o[1]-o[0]+e[!0].currPos)}],legendPointerHeight:r.outerRadius,legendPointerWidth:r.innerRadius,outerRadius:r.outerRadius,innerRadius:r.innerRadius},a.chartInstance,[a.id])},m.prototype.dragCompleted=function(t,e,o){var r,a=this.sliders,i=this.extremes,n=t.conf,l=this.getValueFormPixel(a[!1].currPos),a=this.getValueFormPixel(i[1]-i[0]+a[!0].currPos),s=this._fcChart;t.sliderIndex?(r=l,o=this.getValueFormPixel(i[1]-i[0]+o)):(r=this.getValueFormPixel(o),o=a),e&&C.raiseEvent("legendrangeupdated",{previousMinValue:l,previousMaxValue:a,minValue:r,maxValue:o},s.chartInstance,[s.id]),C.raiseEvent("legendpointerdragstop",{pointerIndex:+t.sliderIndex,pointers:[{value:l},{value:a}],legendPointerHeight:n.outerRadius,legendPointerWidth:n.innerRadius,outerRadius:n.outerRadius,innerRadius:n.innerRadius},s.chartInstance,[s.id])},v.prototype.constructor=v,v.prototype.updateSwingRange=function(t,e){this.swing[+t]=e},v.prototype.draw=function(t,e,o,r){var a,i,n=r.parentLayer,l=this.conf,s=l.outerCircle,h=l.innerCircle,c=Math.ceil(s.rFactor*r.rCalcBase/2),d=Math.ceil(h.rFactor*r.rCalcBase/2),p=c-d,g=this.rangeGroup,u=this.sliderIndex,f=r.componentPool,m=f.getKeys();return l.outerRadius=c,l.innerRadius=d,this._scaleVal=e,h.style["stroke-width"]=p,p=Math.ceil(s.style["stroke-width"]/2),d+=p,i=f.getComponent(this._id,m.KEY_GROUP),n=this.node=i("fc-gl-slider",n).attr({cursor:"pointer",transform:"t0,0"}),"x"===r.key?t=a=t+(u?-d:+d):(a=o,t=o=t+(u?-d:+d)),g.initRange(this,t),i=f.getComponent(this._id,m.KEY_CIRCLE,!0),i(n).attr({cx:o,cy:a,r:c}).css(s.style),i(n).attr({cx:o,cy:a,r:d}).css(h.style),e=this.tracker=i(n).attr({cx:o,cy:a,r:c+5,ishot:!0,fill:M,stroke:0,cursor:"pointer"}).trackTooltip(!!l.showTooltip).tooltip(e,null,null,!0),this._dragAPI=r=this.getDragAPI("x"===r.key),e.undrag(),e.drag(r.dragging,r.dragStart,r.dragEnd),{translateAscending:c+p}},v.prototype.getDragAPI=function(t){var e,o,r,a,i=this,n=i.node,l=i.sliderIndex,s=i.rangeGroup,h=i.conf.innerRadius;return{dragging:function(c,d,p,g,u){var f;return u.stopPropagation(),u.preventDefault(),f=t?d:c,l?(c=e[0]-e[1]+h,d=0):(c=0,d=e[1]-e[0]-h),i.currPos+f<c||i.currPos+f>d?void 0:(n.attr({transform:t?"t0,"+(i.currPos+f):"t"+(i.currPos+f)+",0"}),o=f,r&&clearTimeout(r),r=setTimeout(function(){s.updateWhenInRest(i,i.currPos+f)},100),i.tracker.tooltip(s.updateWhenInMove(i,i.currPos+f),null,null,!0),a=!0)},dragStart:function(o,r,l){l.stopPropagation(),l.preventDefault(),n.attr({transform:t?"t0,"+i.currPos:"t"+i.currPos+",0"}),e=e||i.swing,a=!1,s.dragStarted(i)},dragEnd:function(){var t;s.dragCompleted(i,a,i.currPos+o),a&&(r&&clearTimeout(r),r=setTimeout(function(){s.updateWhenInRest(i,i.currPos)},100),i.currPos+=o,t=e[+l]+i.currPos,s.updateRange(i,t))}}},b.prototype.constructor=b,b.prototype.getValueRatio=function(){var t,e,o=this.colorRange,r=o.length,a=this.valueRatio,i=o[0].value,n=o[r-1].value-i,l=0;if(a)return a;for(a=this.valueRatio=[],e=0;r>e;e++)t=o[e],t=(t.value-i)/n,a.push(100*(t-l)),l=t;return a},b.prototype.getCumulativeValueRatio=function(){var t,e,o=this.colorRange,r=o.length,a=o[0].value,i=o[r-1].value,n=[];for(e=0;r>e;e++)t=o[e],n.push((t.value-a)/(i-a)*100);return n},b.prototype.getBoxFill=function(t){var e,o,r=this.colorRange,a=r.length,i=[];for(o=t?90:0,e=0;a>e;e++)t=r[e],i.push(t.code);return r={FCcolor:{alpha:"100,100,100",angle:o,color:i.join(","),ratio:this.getValueRatio().join(",")}},A(r)},b.prototype.getColorByValue=function(t){var e,o,r,a,i=this.values,n=this.colorRange;if(void 0!==t&&null!==t){for(o=0,e=i.length;e>o;o++){if(t===i[o]){a=n[o].code;break}if(!o&&t<i[o]){r=!0;break}if(o===e-1&&t>i[o]){r=!0;break}if(t>i[o]&&t<i[o+1]){i=n[o],e=n[o+1],n=i.value,o=T(i.code),i=e.value,e=T(e.code),a=a=void 0,a=i-n,a=[Math.round(o[0]+(e[0]-o[0])/a*(t-n)),Math.round(o[1]+(e[1]-o[1])/a*(t-n)),Math.round(o[2]+(e[2]-o[2])/a*(t-n))],a=I(a);break}}if(!r)return a}},y.prototype=Object.create(a.prototype),y.prototype.constructor=y,FusionCharts.register("component",["gradientLegend","gradientLegend",{pIndex:1,enabled:!1,init:function(t){function e(e){n.data=t.chart.jsonData.colorrange,(a=n.nData=k.legacyDataParser(n.data,e))?(n.drawOptions={smartLabel:l.linkedItems.smartLabel,colorRange:n.colorRange=r=new b(a,e,i),maxOtherSide:e.maxOtherSide},n._dontPlot=!1,r&&r._preparationGoneWrong&&(n._dontPlot=!0),n._recalculateLogicalSpace=!0,n._configure()):n._dontPlot=!0}var o,r,a,i,n=this,l=t.chart;return k.init(t),i=n._chart=t.chart,n._cpool=w(i),(o=t.dataExtremes)?void e(o):e},_configure:function(){var t,e,o,r,a,i,n,l=this._chart,s=l.jsonData.chart,h=this.conf={},c=s.outcnvbasefont,d=s.outcnvbasefontsize,p=s.outcnvbasefontcolor,l=l.config.dataLabelStyle;h.caption=_(s.legendcaption),h.legendPosition=_(s.legendposition,"bottom").toLowerCase(),h.showLegend=S(s.showlegend,1),h.interactiveLegend=S(s.interactivelegend,1),h.showLegendLabels=S(s.showlegendlabels,1),t=s.legenditemfontcolor||p,e=s.legenditemfont||c,o=s.legenditemfontsize||d,r=S(s.legenditemfontbold,0),p=s.legendcaptionfontcolor||p,c=s.legendcaptionfont||c,d=s.legendcaptionfontsize||d,a=S(s.legendcaptionfontbold,1),n=(i=s.legendaxisbordercolor?R(F(s.legendaxisbordercolor)):void 0)?S(s.legendaxisborderalpha,100)/100:void 0,h.axisTextItemConf={style:{fill:t?E(_(t)):l.color,fontFamily:e?_(e):l.fontFamily,fontSize:o?S(o):l.fontSize.match(/\d+/)[0],fontWeight:r?"bold":l.fontWeight}},h.legendCaptionConf={style:{fill:p?E(_(p)):l.color,fontFamily:c?_(c):l.fontFamily,fontSize:d?S(d):l.fontSize.match(/\d+/)[0],fontWeight:a?"bold":l.fontWeight,fontStyle:"normal"}},h.legendAxisConf={legendAxisHeight:11,style:{stroke:i,"stroke-opacity":n},line:{style:{stroke:E(_(s.legendscalelinecolor,"FFF8E9"),S(s.legendscalelinealpha,100)),"stroke-width":S(s.legendscalelinethickness)}}},h.sliderGroupConf={showTooltip:S(s.showtooltip,1),outerCircle:{rFactor:S(s.sliderdiameterfactor),style:{stroke:E(_(s.legendpointerbordercolor,"757575"),S(s.legendpointerborderalpha,100))}},innerCircle:{rFactor:S(s.sliderholediameterfactor),style:{stroke:E(_(s.legendpointercolor,"FFFFFF"),S(s.legendpointeralpha,100))}}},h.legendCarpetConf={spreadFactor:S(s.legendspreadfactor),allowDrag:!!S(s.legendallowdrag,0),captionAlignment:_(s.legendcaptionalignment,"center"),style:{fill:E(_(s.legendbgcolor,"e4d9c1"),S(s.legendbgalpha,100)),stroke:E(_(s.legendbordercolor,"c4b89d"),S(s.legendborderalpha,100)),"stroke-width":S(s.legendborderthickness,1)}}},postConfigureInit:function(){var e,o,r,a,v,b,w,C=this.conf;this.elem={},C.caption&&(v=t(k.getDefaultConf("legendCaptionConf"),C.legendCaptionConf),e=new l(C.caption,v)),C.interactiveLegend&&(v=t(k.getDefaultConf("sliderGroupConf"),C.sliderGroupConf),this.elem.sGroup=a=new m(v),this.listeners&&0<this.listeners.length&&a.registerListener.apply(a,this.listeners)),v=t(k.getDefaultConf("legendCarpetConf"),C.legendCarpetConf),"bottom"===C.legendPosition?(this.drawOptions.refSideKey="canvasWidth",this.drawOptions.refOffsetKey="canvasLeft",o=new i(v),b=new s(this.drawOptions.colorRange,k.getDefaultConf("legendBodyConf")),r=new u(t(k.getDefaultConf("legendAxisConf"),C.legendAxisConf)),v=t(k.getDefaultConf("axisTextItemConf"),C.axisTextItemConf),C.showLegendLabels&&(w=new c(v)),C=new p(v)):(this.drawOptions.refSideKey="canvasHeight",this.drawOptions.refOffsetKey="canvasTop",o=new n(v),b=new h(this.drawOptions.colorRange,k.getDefaultConf("legendBodyConf")),r=new f(t(k.getDefaultConf("legendAxisConf"),C.legendAxisConf)),v=t(k.getDefaultConf("axisTextItemConf"),C.axisTextItemConf),C.showLegendLabels&&(w=new d(v)),C=new g(v)),a&&r.addCompositions(a,"RANGE"),w&&b.addCompositions(w,"LEGEND_LABEL"),b.addCompositions(r,"LEGEND_AXIS"),b.addCompositions(C,"AXIS_VALUE"),e&&o.addCompositions(e,"CAPTION"),o.addCompositions(b,"LEGEND_BODY"),this.elem.gl=new y(o,this._cpool)},notifyWhenUpdate:function(t,e,o){var r;(r=this.elem&&this.elem.sGroup)?r.registerListener(t,e,o):this.listeners=[t,e,o];
},dispose:function(){this.elem&&this.elem.gl&&this.elem.gl.dispose(),this.elem={}},getLogicalSpace:function(t){var e=this.conf,o={height:0,width:0},r=this.drawOptions,a=this._chart;return this._recalculateLogicalSpace?this._dontPlot?o:(this._recalculateLogicalSpace=!1,this.postConfigureInit(),e.showLegend?(e=r.refSideKey,r=r.refOffsetKey,this.drawOptions.refSide=a.config[e],this.drawOptions.refOffset=a.config[r],this.drawOptions.maxOtherSide=t||this.drawOptions.maxOtherSide,this.elem.gl&&(this._logicalArea=this.elem.gl.getLogicalSpace(this.drawOptions,!0))):o):(e=r.refSideKey,r=r.refOffsetKey,this.drawOptions.refSide=a.config[e],this.drawOptions.refOffset=a.config[r],(this._logicalArea=this.elem.gl.getLogicalSpace(this.drawOptions,!0))||o)},resetLegend:function(){var t;(t=this.elem&&this.elem.sGroup)&&t.reset()},clearListeners:function(){var t;(t=this.elem&&this.elem.sGroup)&&t.clearListeners()},draw:function(t,e,o){var r=this.conf;this._dontPlot||(this._cpool.init(o.paper),r.showLegend?(this.drawOptions.paper=o.paper,this.drawOptions.parentGroup=o.parentGroup,this.drawOptions.x=t,this.drawOptions.y=e,this.drawOptions.maxOtherSide=this.drawOptions.maxOtherSide||o.maxOtherSide,t=this.elem.gl.draw(this.drawOptions),t=t.getBBox(),r.xPos=t.x,r.yPos=t.y,r.height=t.height,r.width=t.width,this.enabled=!0):this.enabled=!1)}}])}]),FusionCharts.register("module",["private","modules.renderer.js-maps",function(){var t=this,e=t.window,o=t.hcLib,r=o.chartAPI,a=o.pluck,i=o.imprint,n=o.extend2,l=o.parseTooltext,s=o.pluckNumber,h=o.graphics.getLightColor,c=o.dropHash,d=o.HASHSTRING,p=o.parseUnsafeString,g=o.getDashStyle,u=n(o.defaultPaletteOptions,{foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1}),f=o.setLineHeight,m=o.graphics.convertColor,v=/msie/i.test(e.navigator.userAgent)&&!e.opera,b=o.hasSVG,y=e.Math,k=y.min,w=y.max,e=!/fusioncharts\.com$/i.test(e.location.hostname),C=o.toRaphaelColor,x=function(t,e){var o;t||(t={});for(o in e)t[o]=e[o];return t},S=function(t,e){var o=e?x(t.FCcolor,e):{FCcolor:t};return o.toString=C,o},_=function(t,e){var o,r;this.index=e;for(r in t)o=u[t[r]],this[r]=o instanceof Array?o[e]:o},A={right:function(t,e){return e},left:function(t,e){return t-e},center:function(t,e){return 2*k(e,t-e)}},L={top:function(t,e){return e},middle:function(t,e){return 2*k(e,t-e)},bottom:function(t,e){return t-e}},F=function(t,e){var o,r=t&&t.length||!1,a=e||"id",i={};if(!t)return t;for(;r--;)o=t[r],void 0!==o[a]&&(i[o[a].toLowerCase()]=o);return i};x(o.eventList,{entityrollover:"FC_Event",entityrollout:"FC_Event"}),r("geo",{name:"geo",friendlyName:"Map",revision:1,creditLabel:e,hasCanvas:!0,standaloneInit:!1,defaultDatasetType:"maps",baseWidth:400,baseHeight:300,baseScaleFactor:1,defaultSeriesType:"geo",fireGroupEvent:!0,legendposition:"right",hasGradientLegend:!0,isMap:!0,entities:{},init:function(t,e,a,i){var n,l;l=e.chart=e.chart||e.graph||e.map||{},this.jsonData=e,n=this.components=this.components||(this.components={}),n.mapAnnotations=n.mapAnnotations||(n.mapAnnotations=new o.Annotations),this.components.colorPalette=new _(this.colorPaletteMap,(0<l.palette&&6>l.palette?l.palette:s(this.paletteIndex,1))-1),l=FusionCharts.register("component",["caption","MapCaption"]),n.caption||(n.caption=new l),r.mscartesian.init.call(this,t,e,a,i)},configure:function(){var t;t=this.jsonData;var e,r,i,n,l=t.chart||t.map,h=t.markers,c=new _(this.colorPaletteMap,(0<l.palette&&6>l.palette?l.palette:s(this.paletteIndex,1))-1),d=a(l.entitybordercolor,l.bordercolor,c.plotbordercolor),p=a(l.entityfillcolor,l.fillcolor,c.plotfillcolor),g=a(l.entityfillalpha,l.fillalpha,c.plotfillalpha),u=a(l.entityfillratio,l.fillratio,c.plotfillratio),f=a(l.entityfillangle,l.fillangle,c.plotfillangle),m=a(l.nullentityfillcolor,l.nullentitycolor,p),v=s(l.usevaluesformarkers,t.markers&&t.markers.items&&t.markers.items.length,!(t.markers&&t.markers.application&&t.markers.application.length&&t.markers.definition&&t.markers.definition.length));this.base.base.configure.call(this),t=this.config,t.origMarginTop=s(l.charttopmargin,l.maptopmargin,11),t.origMarginLeft=s(l.chartleftmargin,l.mapleftmargin,11),t.origMarginBottom=s(l.chartbottommargin,l.mapbottommargin,11),t.origMarginRight=s(l.chartrightmargin,l.maprightmargin,11),n=t.style,e=n.inCancolor,r=n.inCanfontFamily,i=n.inCanfontSize,t.entityOpts={baseScaleFactor:this.baseScaleFactor,dataLabels:{style:{fontFamily:r,fontSize:i,lineHeight:n.inCanLineHeight,color:n.inCancolor}},fillColor:p,fillAlpha:g,fillRatio:u,fillAngle:f,borderColor:d,borderAlpha:a(l.entityborderalpha,l.borderalpha,this.borderAlpha,"100"),borderThickness:s(l.showentityborder,l.showborder,1)?s(l.entityborderthickness,l.borderthickness,1):0,scaleBorder:s(l.scaleentityborder,l.scaleborder,0),hoverFillColor:a(l.entityfillhovercolor,l.hoverfillcolor,l.hovercolor,c.plothoverfillcolor),hoverFillAlpha:a(l.entityfillhoveralpha,l.hoverfillalpha,l.hoveralpha,c.plothoverfillalpha),hoverFillRatio:a(l.entityfillhoverratio,l.hoverfillratio,l.hoverratio,c.plothoverfillratio),hoverFillAngle:a(l.entityfillhoverangle,l.hoverfillangle,l.hoverangle,c.plothoverfillangle),hoverBorderThickness:a(l.entityborderhoverthickness,l.hoverborderthickness),hoverBorderColor:a(l.entityborderhovercolor,c.plotbordercolor),hoverBorderAlpha:a(l.entityborderhoveralpha,c.plotborderalpha),nullEntityColor:m,nullEntityAlpha:a(l.nullentityfillalpha,l.nullentityalpha,g),nullEntityRatio:a(l.nullentityfillratio,l.nullentityratio,u),nullEntityAngle:a(l.nullentityfillangle,l.nullentityangle,f),connectorColor:a(l.labelconnectorcolor,l.connectorcolor,e),connectorAlpha:a(l.labelconnectoralpha,l.connectoralpha,"100"),connectorThickness:s(l.labelconnectorthickness,l.borderthickness,1),showHoverEffect:s(l.showentityhovereffect,l.usehovercolor,l.showhovereffect,1),hoverOnNull:s(l.hoveronnull,l.entityhoveronnull,1),labelPadding:s(l.labelpadding,5),showLabels:s(l.showlabels,1),labelsOnTop:s(l.entitylabelsontop,1),includeNameInLabels:s(l.includenameinlabels,1),includeValueInLabels:s(l.includevalueinlabels,0),useSNameInTooltip:s(l.usesnameintooltip,0),useShortName:s(l.usesnameinlabels,1),labelSepChar:a(l.labelsepchar,", "),showTooltip:s(l.showentitytooltip,l.showtooltip,1),tooltipSepChar:a(l.tooltipsepchar,", "),tooltext:l.entitytooltext,hideNullEntities:s(l.hidenullentities,0),showHiddenEntityBorder:s(l.showhiddenentityborder,1),showNullEntityBorder:s(l.shownullentityborder,1),hiddenEntityColor:a(l.hiddenentitycolor,l.hiddenentityfillcolor,l.hiddenentityalpha||l.hiddenentityfillalpha?m:"ffffff"),hiddenEntityAlpha:a(l.hiddenentityalpha,l.hiddenentityfillalpha,.001),shadow:s(l.showshadow,this.defaultPlotShadow,c.shadow)},t.markerOpts={dataLabels:{style:{fontFamily:a(l.markerfont,r),fontSize:s(l.markerfontsize,parseInt(i,10)),fontColor:a(l.markerfontcolor,e)}},showTooltip:s(l.showmarkertooltip,l.showtooltip,1),showLabels:s(l.showmarkerlabels,l.showlabels,1),showHoverEffect:s(l.showmarkerhovereffect,1),labelPadding:a(l.markerlabelpadding,"5"),labelWrapWidth:s(l.markerlabelwrapwidth,0),labelWrapHeight:s(l.markerlabelwrapheight,0),fillColor:a(l.markerfillcolor,l.markerbgcolor,c.markerfillcolor),fillAlpha:a(l.markerfillalpha,c.markerfillalpha),fillAngle:a(l.markerfillangle,c.markerfillangle),fillRatio:a(l.markerfillratio,c.markerfillratio),fillPattern:a(l.markerfillpattern,c.markerbgpattern),hoverFillColor:l.markerfillhovercolor,hoverFillAlpha:l.markerfillhoveralpha,hoverFillRatio:l.markerfillhoverratio,hoverFillAngle:l.markerfillhoverangle,borderThickness:a(l.markerborderthickness,1),borderColor:a(l.markerbordercolor,c.markerbordercolor),borderAlpha:s(l.markerborderalpha,c.markerborderalpha),hoverBorderThickness:l.markerborderhoverthickness,hoverBorderColor:l.markerborderhovercolor,hoverBorderAlpha:l.markerborderhoveralpha,radius:s(l.markerradius&&o.trimString(l.markerradius),7),shapeId:a(l.defaultmarkershape,"circle"),labelSepChar:a(l.labelsepchar,", "),tooltipSepChar:a(l.tooltipsepchar,", "),autoScale:s(l.autoscalemarkers,0),tooltext:a(h&&h.tooltext,l.markertooltext),dataEnabled:v,valueToRadius:s(l.markerradiusfromvalue,1),valueMarkerAlpha:a(l.valuemarkeralpha,"75"),hideNull:s(l.hidenullmarkers,0),nullRadius:s(l.nullmarkerradius,l.markerradius,7),adjustViewPort:s(l.adjustviewportformarkers,0),startAngle:s(l.markerstartangle,90),maxRadius:s(l.maxmarkerradius,0),minRadius:s(l.minmarkerradius,0),applyAll:s(l.applyallmarkers,0),shadow:s(l.showmarkershadow,l.showshadow,0)},t.connectorOpts={showHoverEffect:s(l.showconnectorhovereffect,1),thickness:s(l.connectorthickness,l.markerconnthickness,"2"),color:a(l.connectorcolor,l.markerconncolor,c.markerbordercolor),alpha:a(l.connectoralpha,l.markerconnalpha,"100"),hoverThickness:s(l.connectorhoverthickness,l.connectorthickness,l.markerconnthickness,"2"),hoverColor:a(l.connectorhovercolor,l.connectorcolor,l.markerconncolor,c.markerbordercolor),hoverAlpha:a(l.connectorhoveralpha,l.connectoralpha,l.markerconnalpha,"100"),dashed:s(l.connectordashed,l.markerconndashed,0),dashLen:s(l.connectordashlen,l.markerconndashlen,3),dashGap:s(l.connectordashgap,l.markerconndashgap,2),font:a(l.connectorfont,l.markerconnfont,r),fontColor:a(l.connectorfontcolor,l.markerconnfontcolor,e),fontSize:s(l.connectorfontsize,l.markerconnfontsize,parseInt(i,10)),showLabels:s(l.showconnectorlabels,l.showmarkerlabels,l.showlabels,1),labelBgColor:a(l.connectorlabelbgcolor,l.markerconnlabelbgcolor,c.plotfillcolor),labelBorderColor:a(l.connectorlabelbordercolor,l.markerconnlabelbordercolor,c.markerbordercolor),shadow:s(l.showconnectorshadow,l.showmarkershadow,l.showshadow,0),showTooltip:s(l.showconnectortooltip,l.showmarkertooltip,l.showtooltip,1),tooltext:a(h&&h.connectortooltext,l.connectortooltext),hideOpen:s(l.hideopenconnectors,1)},t.adjustViewPortForMarkers=s(l.adjustviewportformarkers,v)},_createLayers:function(){var t=this.graphics||(this.graphics={}),e=this.components.paper,t=this.graphics;t.backgroundGroup=t.backgroundGroup||e.group("background"),t.canvasGroup=t.canvasGroup||e.group("canvas"),t.shadowGroup=t.shadowGroup||e.group("shadow"),t.datasetGroup=t.datasetGroup||e.group("dataset"),t.datalabelsGroup=t.datalabelsGroup||e.group("datalabel"),t.legendGroup=t.legendGroup||e.group("legend"),t.captionGroup=t.captionGroup||e.group("caption"),t.captionGroup.trackTooltip(!0),t.datasetGroup.trackTooltip(!0),t.buttonGroup=t.buttonGroup||e.group("buttons")},_createDatasets:function(){var t=this.components,e=this.jsonData,o=this.defaultDatasetType,r=e.data||{},a=e.markers,e=0,i=this.components.dataset,i=t.dataset||(t.dataset=[]);o&&o.toLowerCase(),(o=FusionCharts.get("component",["dataset","Entities"]))&&(i[e]?(i[e].JSONData=r,i[e].configure()):(t=new o,i.push(t),t.chart=this,t.index=void 0,t.init(r)),e++),o=FusionCharts.get("component",["dataset","Markers"]),t=i[e],o&&a?i[e]?(t.index=void 0,t.init(a),i[e].configure()):(t=new o,i.push(t),t.chart=this,t.index=void 0,t.init(a)):(r=t&&t.type,"markers"===r&&i.splice(e,1))},_parseBackgroundCosmetics:function(){var t,e=this.components.background.config,o=this.components.colorPalette,r=this.jsonData.chart;t=e.showBorder=s(r.showcanvasborder,1),e.borderWidth=t=t?s(r.canvasborderthickness,1):0,e.borderRadius=e.borderRadius=s(r.canvasborderradius,0),e.borderDashStyle=e.borderDashStyle=s(r.borderdashed,0)?g(s(r.borderdashlen,4),s(r.borderdashgap,2),t):"none",e.borderColor=e.borderColor=m(a(r.canvasbordercolor,o&&o.borderColor)),e.borderAlpha=a(r.canvasborderalpha,o.borderAlpha)},_getBackgroundCosmetics:function(){var t=this.jsonData.chart||this.jsonData.map,e=this.components.colorPalette;return{FCcolor:{color:a(t.bgcolor,t.canvasbgcolor,e.bgcolor),alpha:a(t.bgalpha,t.canvasbgalpha,e.bgalpha),angle:a(t.bgangle,t.canvasbgangle,e.bgangle),ratio:a(t.bgratio,t.canvasbgratio,e.bgratio)}}},_parseCanvasCosmetics:function(){var t=this.config,e=this.jsonData.chart||this.jsonData.map,o=this.components.canvas.config;t.origMarginTop=s(e.maptopmargin,11),t.origMarginLeft=s(e.mapleftmargin,11),t.origMarginBottom=s(e.mapbottommargin,11),t.origMarginRight=s(e.maprightmargin,11),t.origCanvasLeftMargin=s(e.canvasleftmargin,0),t.origCanvasRightMargin=s(e.canvasrightmargin,0),t.origCanvasTopMargin=s(e.canvastopmargin,0),t.origCanvasBottomMargin=s(e.canvasbottommargin,0),o.canvasBorderRadius=s(e.canvasborderradius,0),o.origCanvasTopPad=s(e.canvastoppadding,0),o.origCanvasBottomPad=s(e.canvasbottompadding,0),o.origCanvasLeftPad=s(e.canvasleftpadding,0),o.origCanvasRightPad=s(e.canvasrightpadding,0)},draw:function(){this.config.entitiesDrawn=!1,this.config.hasChartMessage?(this._hide(),this.drawChartMessage()):(this._show(),this._createToolBox(),this._manageSpace(),this._updateVisuals(),this.inited=!0,this.chartInstance.jsVars.drawCount+=1,this.chartInstance.__state.dataReady=!0,this.chartInstance.jsVars.hasNativeMessage=!1)},_drawDataset:function(){var t=this.chartInstance,e=this.components.dataset,o=this.graphics,r=e.length,a=this.config.scalingParams;for(o.datasetGroup.hide(),o.shadowGroup.hide(),t.addEventListener("internal.mapdrawingcomplete",function(){return function(t){t.detachHandler(),b&&(o.datasetGroup&&o.datasetGroup.attr({transform:a.transformStr}),o.shadowGroup&&o.shadowGroup.attr({transform:a.transformStr})),o.datasetGroup&&o.datasetGroup.show(),o.shadowGroup&&o.shadowGroup.show()}}()),t=0;r>t;t++)e[t].draw();this.checkComplete()},preliminaryScaling:function(){for(var t,e,o=this.jsonData,r=(o=o.markers&&o.markers.items||[],o.length||0),a=1/0,i=1/0,n=-(1/0),l=-(1/0);r--;)e=o[r],t=Number(e.x),e=Number(e.y),a=k(a,t),i=k(i,e),n=w(n,t),l=w(l,e);return{x:a,y:i,x1:n,y1:l}},getScalingParameters:function(t,e,o,r){var a=t/e,i=o/(t*this.baseScaleFactor),n=r/(e*this.baseScaleFactor),l=0,s=0;return i>n?(i=n,l+=(o-r*a)/2,t=200/(e*i)):(s+=(r-o/a)/2,t=200/(t*i)),{scaleFactor:i,strokeWidth:t,translateX:l,translateY:s}},calculateMarkerBounds:function(t,e,o){var r,a,i,n,l,s=this.config,h=s.markerOpts,c=this.components.dataset,d=this.getDataLimits(),p=d.dataMin,d=d.dataMax,g=h.hideNull,u=h.nullRadius,h=h.valueToRadius,f=1/0,m=1/0,v=-(1/0),b=-(1/0);for(i=0,n=c.length;n>i;i++)s=c[i],a=s.type,"markers"===a&&(r=s);if(r)for(i in r.calculateMarkerRadiusLimits(),a=r.conf||{},c=a.minRadius,a=a.maxRadius,r=r.components&&r.components.markerObjs||{})s=r[i],s=s.config,l=s.definition||{},null!==s.cleanValue?(h&&void 0===l.radius&&(s.radius=c+(a-c)*(s.cleanValue-p)/(d-p)),n=Number(s.radius),s=(Number(l.x)+e)*t,l=(Number(l.y)+o)*t,f=k(f,s-n),m=k(m,l-n),v=w(v,s+n),b=w(b,l+n)):g?s.__hideMarker=!0:null===s.radius&&(s.radius=u);return{x:f,y:m,x1:v,y1:b}},_spaceManager:function(){var t,e,o=this.config,r=this.components.legend.config.legendPos,a=this.jsonData.chart,i=o.origMarginLeft,n=o.origMarginTop,l=this.baseWidth,h=this.baseHeight,c={},d=0,p=0,c=o.markerOpts,a=o.borderWidth=o.showBorder?s(a.borderthickness,1):0;this._allocateSpace({top:a,bottom:a,left:a,right:a}),this._manageLegendSpace("right"===r?.3*o.canvasWidth:.3*o.canvasHeight),r=this._manageChartMenuBar("bottom"===r?.225*o.canvasHeight:.225*o.canvasWidth),a=o.canvasWidth,t=o.canvasHeight,c.dataEnabled?(o.adjustViewPortForMarkers?(c=this.preliminaryScaling(),c.x1>l&&(l=c.x1),0>c.x&&(l+=-c.x,d=-c.x),c.y1>h&&(h=c.y1),0>c.y&&(h+=-c.y,p=-c.y),o=this.getScalingParameters(l,h,a,t),c=this.calculateMarkerBounds(o.scaleFactor*this.baseScaleFactor,d,p),o=t,e=a,0>c.x&&(i+=-c.x,a+=c.x),0>c.y&&(n+=-c.y,t+=c.y),c.x1>e&&(a-=c.x1-e),c.y1>o&&(t-=c.y1-o)):(o=this.getScalingParameters(l,h,a,t),this.calculateMarkerBounds(o.scaleFactor*this.baseScaleFactor,d,p)),o=this.getScalingParameters(l,h,a,t),i+=d*o.scaleFactor*this.baseScaleFactor,n+=p*o.scaleFactor*this.baseScaleFactor):o=this.getScalingParameters(l,h,a,t),this.config.scalingParams=o,l=o.scaleFactor,o.translateX+=i,o.translateY=o.translateY+n+r.top||0,o.sFactor=l*this.baseScaleFactor,o.transformStr=["t",o.translateX,",",o.translateY,"s",l,",",l,",0,0"].join(""),this.components.mapAnnotations.reset(null,{id:"geo",showbelow:0,autoscale:0,grpxshift:o.translateX?o.translateX:0,grpyshift:o.translateY?o.translateY:0,xscale:100*(l?l*this.baseScaleFactor:1),yscale:100*(l?l*this.baseScaleFactor:1),options:{useTracker:!0}},this),this.components.mapAnnotations._renderer&&(this.components.mapAnnotations._renderer=null)},getFirstId:function(){return this.firstEntity},getDataLimits:function(){var t,e,o=this.components.dataset,r=o.length,a=1/0,i=-(1/0);for(e=0;r>e;e++)t=o[e],t=t.getDataLimits(),a=k(a,t.min),i=w(i,t.max);return{dataMin:a,dataMax:i}},getEntityPaths:function(t){var e,o={},r=this.entities;if(t){for(e in r)o[e]=r[e];return o}return r},checkComplete:function(){var e=this.components.mapAnnotations;this.config.entityFlag&&this.config.entitiesReady&&(this.config.entityFlag=!1,e.draw(this),t.raiseEvent("internal.mapdrawingcomplete",{renderer:this},this.chartInstance))},colorPaletteMap:{basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},eiMethods:{getMapName:function(){return this.jsVars.instanceAPI.name},getEntityList:function(){var t,e,o,r,a=this.jsVars.instanceAPI.components.dataset||[],i=a.length,n=[];for(t=0;i>t;t++)if(o=a[t]||[],r=o.type,"entity"===r){e=o;break}a=e.components.data;for(t in a)a.hasOwnProperty(t)&&(e=a[t]||{},e=e.config||{},n.push({id:e.id,originalId:e.originalId||e.id,label:e.label,shortlabel:e.shortLabel,value:e.value,formattedValue:e.formattedValue,toolText:e.toolText}));return n},getMapAttribute:function(){return t.raiseWarning(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){return t.raiseWarning(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),this.exportChart&&this.exportChart.apply(this,arguments)},addMarker:function(e){var o,r,a,i,n=this.jsVars.instanceAPI.components.dataset||[],l=n.length;for(o=0;l>o;o++)if(r=n[o]||[],i=r.type,"markers"===i){a=r;break}a&&!a.addMarkerItem(e)&&t.raiseWarning(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(t,e){var o,r,a,i,n=this.jsVars.instanceAPI.components.dataset||[],l=n.length;for(o=0;l>o;o++)if(r=n[o]||[],i=r.type,"markers"===i){a=r;break}a&&t&&(t=(t+"").toLowerCase(),a.updateMarkerItem(t,e))},removeMarker:function(t){var e,o,r,a,i=this.jsVars.instanceAPI.components.dataset||[],n=i.length;for(e=0;n>e;e++)if(o=i[e]||[],a=o.type,"markers"===a){r=o;break}t&&(t=(t+"").toLowerCase(),r._removeMarkerItem(t))}},_createAxes:function(){}},r.mscartesian),FusionCharts.register("component",["caption","MapCaption",{configure:function(){var t=this.chart,e=t.jsonData.chart,o=t.components,r=o.caption.config,i=t.config.style,t=i.outCanfontFamily,n=i.outCancolor,i=i.fontSize,l=["top","center"],o=o.subCaption.config;switch(r.style={fontFamily:a(e.captionfont,t),color:m(a(e.captionfontcolor,n).replace(/^#? ([a-f0-9]+)/gi,"#$1")),fontSize:s(e.captionfontsize,i+3)+"px",fontWeight:0===s(e.captionfontbold)?"normal":"bold"},r.align=o.align=a(e.captionposition,"center"),r.align&&(l=r.align.split("-"),l[0]&&(l[0]=l[0].toLowerCase()),l[1]&&(l[1]=l[1].toLowerCase())),r.isOnTop="bottom"===l[0]?o.isOnTop=0:o.isOnTop=1,l[1]){case"right":r.align="end";break;case"left":r.align="start";break;default:r.align="middle"}r.alignWithCanvas=o.alignWithCanvas=s(e.aligncaptionwithcanvas,1),r.horizontalPadding=o.horizontalPadding=s(e.captionhorizontalpadding,r.alignWithCanvas?0:15),r.drawCaption=!0,f(r.style),o.style={fontFamily:a(e.subcaptionfont,e.captionfont,t),color:m(a(e.subcaptionfontcolor,e.captionfontcolor,n).replace(/^#? ([a-f0-9]+)/gi,"#$1")),fontSize:s(e.subcaptionfontsize,s(w(s(e.captionfontsize)-3,-1),i)+s(this.subTitleFontSizeExtender,1))+"px",fontWeight:0===s(e.subcaptionfontbold,this.subTitleFontWeight,e.captionfontbold)?"normal":"bold"},f(o.style)}},"Caption"]),FusionCharts.register("component",["dataset","Entities",{customConfigFn:"_createDatasets",type:"entity",configure:function(){var t,e,r=this.chart,a=r.jsonData,l=this.conf,h=r.components,c=a.map||a.chart,r=o.nonGradientColorRange,d=(a.colorrange||{}).gradient,p=h.postLegendInitFn,g=h.numberFormatter,u={},h=a.entitydef||[];for(t=a.data&&a.data[0]&&a.data[0].data?this.JSONData=a.data[0].data||[]:this.JSONData=a.data||[],l.useSNameAsId=s(c.usesnameasid,0),this._redefineEntities(h),h=this.components.data,l.showTooltip=s(c.showtooltip,1),l.showHoverEffect=s(c.showhovereffect,0),t=(l=t)&&l.length||0,c={};t--;)u=l[t],void 0!==u.id&&(c[u.id.toLowerCase()]=u);t=c,this.calculateDataLimits(),u=this.getDataLimits(),d?p({min:u.min,max:u.max}):this.components.colorRange=new r({colorRange:a.colorrange,dataMin:u.min,dataMax:u.max,defaultColor:"#00ff00",numberFormatter:g});for(e in h)a=t[e],r=h[e],r.dataset=this,a?this._configureEntity(e,r,i(this._sanitizeEntityOptions(n({},a)),r.config)):this._configureEntity(e,r,r.config);this._addLegend()},init:function(t){this.JSONData={data:t},this.components={},this.conf={},this.graphics={},this.configure()},updateEntityColors:function(t,e){var o,r,a,i,n=this.components.data,l=this.chart,s={"fill-opacity":0};for(i in n)o=n[i],r=o.config,a=r.cleanValue,r=r.alphaArr||[],r={"fill-opacity":r[0]/100||1},t>a||a>e?(this.setCustomAttrs(o,s,l),o.hidden=!0):(o.hidden=!1,this.setCustomAttrs(o,r,l))},_addLegend:function(){var t,e,o,r,i,n=this.chart.components.legend,l=(this.components.colorRange||{}).colorArr||[],s=this.components.entityColorMap=this.components.entityColorMap||(this.components.entityColorMap=[]),p=l.length;for(n.emptyItems(),e=s.length=0,p=l.length;p>e;e++)t=l[e],r=a(t.code,t.color),o=h(r,60).replace(c,d),i=h(r,40),r={FCcolor:{color:r+","+r+","+i+","+r+","+r,ratio:"0,70,30",angle:270,alpha:"100,100,100,100,100"}},o={fillColor:C(r),label:a(t.label,t.displayvalue),strokeColor:C(o),legendItemId:t.legendItemId},(r=s[e])||(r=s[e]={config:{}}),r.config=t,r.visible=!0,r.dataset=this,r.legendItemId=n.addItems(r,this.legendInteractivity,o)},legendInteractivity:function(t,e){var o,r,a,i=this.config,n=t.config,l=t.visible,s=t.dataset,h=s.chart,c=s.components.data,d=e.config,p=e.graphics,g=s.components.colorRange,u=i.itemHiddenStyle.color,i=i.itemStyle.color,f=d.fillColor;r={};var m,v={},b={"fill-opacity":0},y=d.strokeColor;t.visible=!l;for(o in c)c.hasOwnProperty(o)&&(r=c[o],d=r.config,a=d.cleanValue,a=g.getColorObj(a),d=d.visibleEntityAttr,v["fill-opacity"]=d["fill-opacity"],d=l?b:v,n.code===a.code&&(r.hidden=!!l,s.setCustomAttrs(r,d,h)));r={legendItemSymbol:{fill:l?u:f,stroke:l?u:y},legendItemText:{fill:l?u:i},legendIconLine:{stroke:l?u:f}};for(m in p)(n=p[m])&&n.attr&&n.attr(r[m])},setCustomAttrs:function(t,e,o){var r=o.get("config","animationObj");o=r.transposeAnimDuration,r=r.animType,t&&(t=t.graphics,t=t.outlines,t.animate(e,o,r))},calculateDataLimits:function(){var t,e,o,r=this.chart,a=this.conf,i=r.jsonData.data||[],r=r.components.numberFormatter,n=1/0,l=-(1/0);for(o=0,e=i.length;e>o;o++)t=i[o].value,t=r.getCleanValue(t),n=k(n,t),l=w(l,t);a.max=l,a.min=n},_configureEntity:function(t,e,o){var r,i=this.chart,n=this.conf,h=i.jsonData,c=i.components,d=c.numberFormatter,i=i.config.entityOpts,g=e.config,u=e.labelConfig,f=o.value,v=h.colorrange&&h.colorrange.gradient,b=(c=c.gradientLegend)&&c.colorRange,y=this.components.colorRange,c=g.cleanValue=d.getCleanValue(f),d=g.formattedValue=c?d.dataLabels(c):void 0,h=s(o.showtooltip,i.showTooltip),k=this._getDefaultTooltip.call(e,o,this),w={formattedValue:d,sName:o.shortLabel,lName:o.label},C=i.dataLabels.style,h=g.toolText=h?p(a(l(a(o.tooltext,i.tooltext,k),[1,2,7,38,39],w,o))):"",w=g.borderColor=a(o.bordercolor,i.borderColor),x=g.borderAlpha=a(o.borderalpha,i.borderAlpha),_=g.borderThickness=s(o.borderthickness,i.borderThickness),A=g.useHoverColor=s(o.showhovereffect,o.usehovercolor,i.hoverOnNull?i.showHoverEffect:isNaN(f)?0:i.showHoverEffect),k=g.labelAlignment,f=i.labelSepChar;e.hidden=!1,g.showLabel=s(o.showlabel,i.showLabels),g.labelPadding=s(o.labelpadding,i.labelPadding),g.fontFamily=a(o.font,C.fontFamily),g.fontSize=s(parseInt(o.fontsize,10),parseInt(C.fontSize,10)),g.fontBold=s(o.fontbold,0),g.fontColor=a(o.fontcolor,C.color),g.connectorColor=a(o.labelconnectorcolor,i.connectorColor),g.connectorAlpha=a(o.labelconnectoralpha,i.connectorAlpha),g.hoverBorderThickness=s(o.borderhoverthickness,o.hoverborderthickness,i.hoverBorderThickness),g.hoverBorderColor=a(o.borderhovercolor,o.hoverbordercolor,i.hoverBorderColor,g.borderColor),g.hoverBorderAlpha=a(o.borderhoveralpha,o.hoverborderalpha,i.hoverBorderAlpha,g.borderAlpha),g.connectorThickness=s(o.labelconnectorthickness,i.connectorThickness),g.origConnectorThickness=g.connectorThickness,g.borderThickness=_,g.link=o.link,g.isVisible=!0,g.id=t,g.originalId=o.origId,c&&(b&&v?r=b.getColorByValue(c):y&&(t=y.getColorObj(c),r=a(t.color,t.code))),void 0!==a(o.color,o.alpha,o.angle,o.ratio)?(r=a(o.color,r,i.fillColor),t=a(o.alpha,i.fillAlpha),v=a(o.angle,i.fillAngle),b=a(o.ratio,i.fillRatio),r=S({color:r,alpha:t,angle:v,ratio:b})):(r=S({color:a(r,i.fillColor),alpha:a(i.fillAlpha),angle:a(i.fillAngle),ratio:a(i.fillRatio)}),t=S({color:a(i.nullEntityColor),alpha:a(i.nullEntityAlpha),angle:a(i.nullEntityAngle),ratio:a(i.nullEntityRatio)}),r=null===c?t:r,t=r.FCcolor.alpha),""===h&&(n.showTooltip=0),g.visibleEntityAttr={stroke:m(w,x),fill:(g.fillColor=r).toString(),"fill-opacity":t/100},n=t.split(","),g.alphaArr=n,A&&(void 0!==a(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)?(r=a(o.fillhovercolor,o.hoverfillcolor,i.hoverFillColor),t=a(o.fillhoveralpha,o.hoverfillalpha,i.hoverFillAlpha),v=a(o.fillhoverangle,o.hoverfillangle,i.hoverFillAngle),b=a(o.fillhoverratio,o.hoverfillratio,i.hoverFillRatio),n=S({color:r,alpha:t,angle:v,ratio:b})):(i.hoverColorObject||(i.hoverColorObject=S({color:i.hoverFillColor,alpha:i.hoverFillAlpha,angle:i.hoverFillAngle,ratio:i.hoverFillRatio})),n=i.hoverColorObject),g.hoverColor=n),!u&&(u=e.labelConfig={}),n=g.fontColor,t=g.fontFamily,w=g.fontBold,h=g.toolText,k?(e=k[0],k=k[1]):(e="center",k="middle"),u.align=e,u.vAlign=k,u.bgColor="",u.borderColor="",u.fontColor=n,u.fontFamily=t,u.fontBold=w,u.toolText=h,"undefined"!=typeof o.displayvalue?o=o.displayvalue:(o=a(i.includeNameInLabels?i.useShortName?g.shortLabel:g.label:""),i.includeValueInLabels&&null!==c&&(o=void 0===o?d:o+f+d)),u.displayValue=o},_sanitizeEntityOptions:function(t){return delete t.outlines,delete t.label,delete t.shortlabel,delete t.labelposition,delete t.labelalignment,delete t.labelconnectors,t},_redefineEntities:function(t){var e,r,a,i,n,l,s,h,c,d=this.conf,p={},g={},u=this.chart.entities,f=d.useSNameAsId,m=0;for(e=t.length;e--;)if(r=t[e],a=r.internalid,i=r.newid?r.newid:a,n=r.sname,l=r.lname,h=u[a],a=o.trimString(a),i=(i=o.trimString(i))&&i.toLowerCase(),h){p[i]=i={origId:a},g[a]=!0;for(c in h)i[c]=h[c];i.shortLabel=n?n:h.shortLabel,i.label=l?l:h.label,i.showhovereffect=r.showhovereffect,i.fillhovercolor=r.fillhovercolor,i.fillhoveralpha=r.fillhoveralpha,i.fillhoverangle=r.fillhoverangle,i.fillhoverratio=r.fillhoverratio,i.borderhoverthickness=r.borderhoverthickness}h=this.components.data,h||(h=this.components.data={});for(s in p)s=s.toLowerCase(),h[s]||(h[s]={config:{}}),h[s].config=p[s],m+=1;p=h;for(s in u)if(i=u[s],s=o.trimString(s),!g[s]){f?((h=p[i.shortLabel.toLowerCase()])||(h=p[i.shortLabel.toLowerCase()]={}),h.config={},h.origId=i.shortLabel):((h=p[s.toLowerCase()])||(h=p[s.toLowerCase()]={}),h.config={},h.config.origId=s);for(c in i)h.config[c]=i[c];m+=1}d.entityCount=m},draw:function(){var t=this.conf,e=b?100:50,o=this.chart;this.conf.ready=!1,t.BATCH_SIZE=e,this._batchRender()(),o.config.entityFlag=!0},_batchRender:function(){var t,e,o,r=this,a=r.conf,i=r.components.data,n=a.BATCH_SIZE,l=a.entityCount,s=Object.keys(i),h=s.length,c=0,d=function(){for(o=0,t=c;h>t&&(e=i[s[t]],r.drawEntity(e),o+=1,c+=1,o!==n);t++);l>o?(l-=o,setTimeout(d,0)):r.initComplete()};return d},_getDefaultTooltip:function(t){var e=this.dataset,o=this.config.cleanValue,r=this.config.formattedValue,a=e.chart.config.entityOpts;if(e.hasFeature.apply(this,["_ds"])){if(t=t.labels&&t.labels[0],!t)return;o=(a.useSNameInTooltip?t.shortText:t.text)+(isNaN(o)?"":a.tooltipSepChar+r)}else o=(a.useSNameInTooltip?t.shortLabel:t.label)+(null===o?"":a.tooltipSepChar+r);return o},hasFeature:function(t){var e=this.featureConfig;return e&&"undefined"!=typeof e[t]?Boolean(e[t]):!1},drawEntity:function(t){var e=this.chart,o=e.config,r=e.components,a=r.gradientLegend,r=r.paper,i=t.config,n=b||!v?"litepath":"path",l=e.config.entityOpts,s=e.config.scalingParams,h=i.outlines,c=e.graphics.datasetGroup,d=e.graphics.shadowGroup,p=!v||b,g=s.scaleFactor,u=s.strokeWidth,f=(p?e.baseScaleFactor:1)*u,m=1===l.scaleBorder,k=i.borderThickness,C=i.toolText,x=l.shadow,l=[],S=i.origConnectorThickness,_=i.hoverBorderThickness,A=i.visibleEntityAttr,L=A["fill-opacity"],e={scalefactor:[g,g*e.baseScaleFactor],opacity:w.apply(y,i.alphaArr)/100};if(a&&!0===o.gLegendEnabled&&(t.hidden=!1),L=t.hidden?0:L,a&&a.enabled&&(a.resetLegend(),a.clearListeners()),a&&a.notifyWhenUpdate(this.updateEntityColors,this),p?(k=i.entityBorderThickness=m?k*f:k/g,S/=g,_&&(i.hoverBorderThickness=m?_*f:_/g)):k=m?k*u:k,i.entityBorderThickness=k,i.connectorThickness=S,A["stroke-width"]=k,A.transform=b||!v?"":s.transformStr,o=h.length,t.graphics||(t.graphics={}),x){for(;o--;)a=h[o],l=a.concat(l);t.graphics.outlines?t.graphics.outlines.attr(A).attr({"fill-opacity":L}).tooltip(C).shadow(e,d):t.graphics.outlines=r[n](l,c).attr(A).tooltip(C).shadow(e,d)}else{for(;o--;)a=h[o],l=a.concat(l);t.graphics.outlines?t.graphics.outlines.attr(A).attr({"fill-opacity":L}).tooltip(C):t.graphics.outlines=r[n](l,c).attr(A).tooltip(C)}this.addMouseGestures.call(t)},drawLabels:function(t){var e,o=[],r=t.chart.components.mapAnnotations,a={id:"entityLabels",items:o};for(e in this)t.drawLabel.call(this[e],o);r.addGroup(a)},_getLabelObject:function(e,o){var r,a=this,i=a.dataset,n=i.chart,l=a.config,s=a.labelConfig,h=n.config.scalingParams,c=l.labelPosition,d=l.labelAlignment,p=a.graphics&&a.graphics.outlines,g=l.style=l.style||(l.style={}),u=l.fontSize,f=l.labelPadding;return c?(p=c[0],c=c[1]):(c=p.getBBox(),p=c.x+c.width/2,c=c.y+c.height/2),d?(r=d[0],d=d[1],"right"===r?p-=f:"left"===r&&(p+=f),"top"===d?c-=f:"bottom"===d&&(c+=f)):(r="center",d="middle"),u=parseFloat(u)/h.sFactor,!o&&g&&(g.color&&(s.fontColor=g.color),g["font-size"]&&(u=parseFloat(g["font-size"])/h.sFactor),g["font-family"]&&(s.fontFamily=g["font-family"]),void 0!==g["font-weight"]&&(s.fontBold="bold"===g["font-weight"])),s.x=p.toString(),s.y=c.toString(),s.wrap=1,s.type="text",s.fontSize=u,{x:p.toString(),y:c.toString(),wrapwidth:A[r](void 0,p+void 0)-f,wrapheight:L[d](void 0,c+void 0)-f,wrap:1,type:"text",align:s.align,valign:s.vAlign,text:s.displayValue,tooltext:s.toolText,link:s.link,bgcolor:s.bgColor,bordercolor:s.borderColor,fillcolor:s.fontColor,fontsize:s.fontSize,font:s.fontFamily,bold:s.fontBold,onclick:function(e){t.raiseEvent("entityclick",l.eventArgs,n.chartInstance,e);
},onmouseover:function(t){i.entityRollOver.call(a.graphics.outlines,t)},onmouseout:function(t){i.entityRollOut.call(a.graphics.outlines,t)},ontouchstart:function(t){i.entityRollOver.call(a.graphics.outlines,t)}}},drawLabel:function(t){var e=this.dataset,o=this.config;o.showLabel&&(t.push(e._getLabelObject.call(this,!0,!0)),o.labelConnectors&&e.drawLabelConnectors.call(this,o.labelConnectors))},drawLabelConnectors:function(t){for(var e,o,r=this.config,a=this.dataset.chart,i=a.components.paper,a=a.graphics.datasetGroup,n=t&&t.length||0;n--;)o=t[n],e=this.graphics.connectorElem,e||(this.graphics.connectorElem=e=i.path(o,a)),e.attr({transform:"",stroke:m(r.connectorColor,r.connectorAlpha),"shape-rendering":"crisp","stroke-width":r.connectorThickness})},entityClick:function(e){var o=this.node.__entity,r=o.dataset.chart,a=r.linkedItems.linkClickFN,o=o.config,i=o.link;t.raiseEvent("entityclick",o.eventArgs,r.chartInstance,e),void 0!==i&&a.call({link:i},r)},entityRollOver:function(t){var e=this.node.__entity,r=e.config,a=e.dataset.chart,i=r.hoverAttr;o.plotEventHandler.call(this,a,t,"entityRollOver"),this.data("hovered")?clearTimeout(e.config.timer):r.useHoverColor&&r.isVisible&&!e.hidden&&(a.config.hoverEntity=this,this.attr(i),this.data("hovered",!0))},entityRollOut:function(t){var e,r=this,a=this.node.__entity,i=a.config.revertAttr;o.plotEventHandler.call(r,a.dataset.chart,t,"entityRollOut"),a.config.timer=setTimeout(function(){e=a.hidden,!0!==e&&(r.attr(i),r.data("hovered",!1))},100)},addMouseGestures:function(){var t,e=this.config,o=this.dataset,r=this.graphics,a=e.hoverBorderThickness,i=e.hoverBorderColor,n=e.hoverBorderAlpha,l=e.entityBorderThickness,h=e.borderColor,c=e.borderAlpha,d=e.link,p=e.visibleEntityAttr,g="groupId"+e.originalId;e.eventArgs={value:e.value,label:e.label,shortLabel:e.shortLabel,originalId:e.origId,id:e.id||e.origId},e.legacyEventArgs={value:e.value,lName:e.label,sName:e.shortLabel,id:e.originalId||e.id},e.hoverAttr={fill:C(e.hoverColor)},e.revertAttr={fill:C(e.fillColor),stroke:C(e.borderColor,e.borderAlpha)},e.revertAttr["fill-opacity"]=p["fill-opacity"],a!==l&&(e.hoverAttr["stroke-width"]=s(a,l),e.revertAttr["stroke-width"]=l),i===h&&n===c||(e.hoverAttr.stoke=m(i,n),e.revertAttr.stroke=m(h,c));for(t in r)void 0!==d&&r[t].css({cursor:"pointer",_cursor:"hand"}),r[t].data("eventArgs",e.eventArgs),r[t].data("groupId",g),r[t].node.__entity=this,this._listenersBinded||r[t].click(o.entityClick).hover(o.entityRollOver,o.entityRollOut),this._listenersBinded=!0},getDataLimits:function(){var t=this.conf;return{max:t.max,min:t.min}},initComplete:function(){var t=this.chart;this.drawLabels.call(this.components.data,this),t.config.entitiesReady=!0,t.checkComplete()}}]),FusionCharts.register("component",["dataset","Markers",{type:"markers",configure:function(){var t=this.chart.config.markerOpts;this.calculateDataLimits(),t.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()},init:function(t){this.JSONData=t,this.components={},this.conf={},this.graphics={},this.configure()},calculateMarkerRadiusLimits:function(){var t=this.JSONData,e=this.conf,o=this.chart,t=this.getMarkerRadiusLimits(o.config.width,o.config.height,t.markermaxradius,t.markerminradius);e.minRadius=t.min,e.maxRadius=t.max},calculateDataLimits:function(){var t,e,o,r=this.chart,a=this.conf,i=(r.jsonData.markers||{}).items||[],r=r.components.numberFormatter,n=1/0,l=-(1/0);for(o=0,e=i.length;e>o;o++)t=i[o],t=t.value,t=r.getCleanValue(t),null!==t&&(n=k(t,n),l=w(t,l));a.min=n,a.max=l},_parseMarkers:function(){var t,e,o,r,i,n,l,h=this.chart,c=h.jsonData.markers,d=c.items,p=c.shapes,c=h.config.markerOpts,g=h.components.numberFormatter,u=this.components.shapeObjs=this.components.shapeObjs||(this.components.shapeObjs={}),f=this.components.markerObjs=this.components.markerObjs||(this.components.markerObjs={});if(d&&d.length){if(p&&p.length)for(t=p.length;t;--t)o=p[t-1],(l=o.id.toLowerCase())&&(u[l]=o);for(t=d.length;t--;)o=d[t],(l=o.id&&o.id.toLowerCase())&&(p=o.value,void 0!==p&&""!==p&&(p=parseFloat(p)),e=this._initializeMarkerItem(l,o,null,h),(r=e.config.options.shapeid)&&"string"==typeof r&&(r=r.toLowerCase()),i=e.config,n=i.options,i.cleanValue=g.getCleanValue(p),i.formattedValue=null!==i.cleanValue?g.dataLabels(p):void 0,i.fillColor=a(n.fillcolor,n.color,c.fillColor),i.fillAlpha=a(n.fillalpha,n.alpha,c.fillAlpha),i.fillRatio=a(n.fillratio,c.fillRatio),i.fillAngle=a(n.fillangle,c.fillAngle),i.borderThickness=s(n.borderthickness,c.borderThickness),i.borderColor=a(n.bordercolor,c.borderColor),i.borderAlpha=a(n.borderalpha,c.borderAlpha),i.labelPadding=n.labelpadding||c.labelPadding,e.dataset=this,o.__hideMarker&&(e._isHidden=!0),r&&(e.shapeObj=u[r]),f[l]=e)}},defineMarkersNShapes:function(){var t,e,o,r,i=this.chart,n=i.jsonData.markers,l=n.definition,h=i.components.numberFormatter,c=i.config.markerOpts,d=F(l)||{},p=F(n.application)||{},g=n.shapes,n=this.components.shapeObjs=this.components.shapeObjs||(this.components.shapeObjs={}),u=this.components.markerObjs=this.components.markerObjs||(this.components.markerObjs={});if(l&&l.length){if(g&&g.length)for(l=g.length;l;--l)t=g[l-1],(r=t.id.toLowerCase())&&(n[r]=t);for(r in d)t=d[r],l=u[r]=this._initializeMarkerItem(r,t,p[r],i),l.dataset=this,o=l.config.options.shapeid,g=l.config,e=t.value,g.cleanValue=h.getCleanValue(e),t=g.options,g.formattedValue=null!==g.cleanValue?h.dataLabels(e):void 0,g.fillColor=a(t.fillcolor,t.color,c.fillColor),g.fillAlpha=a(t.fillalpha,t.alpha,c.fillAlpha),g.fillRatio=a(t.fillratio,c.fillRatio),g.fillAngle=a(t.fillangle,c.fillAngle),g.borderThickness=s(t.borderthickness,c.borderThickness),g.borderColor=a(t.bordercolor,c.borderColor),g.borderAlpha=a(t.borderalpha,c.borderAlpha),g.labelPadding=t.labelpadding||c.labelPadding,g.options.tooltext=a(t.tooltext,c.tooltext),g.link=t.link,o&&(l.shapeObj=n[o.toLowerCase()])}},getMarkerRadiusLimits:function(t,e,o,r){return e=k(t,e),t=.02*e,e*=.07,r=parseFloat(r),o=parseFloat(o),isNaN(r)||isNaN(o)?isNaN(r)?isNaN(o)?{min:t,max:e}:{min:parseInt(o/10,10),max:o}:{min:r,max:10*r}:o>r?{min:r,max:o}:{min:o,max:r}},getDataLimits:function(){var t=this.conf;return{min:t.min,max:t.max}},_initializeMarkerItem:function(t,e,o){var r={},a=r.config;return a||(a=r.config={}),a.id=t,a.definition=e,a.application=o,a.hasValue=null,a.value=null,a.options=null,a.label=null,a.markerShape=null,a.markerLabel=null,a.drawOptions={shape:null,label:null},a.drawComplete=!1,t=r.config.options=n({},a.definition),a.dataEnabled?isNaN(t.value)||""===t.value||(r.value=parseFloat(t.value),r.hasValue=!0):a.applyAll?a.options=n(t,a.application):o&&(a.options=n(t,a.application)),r},configureConnectors:function(){var e,o,r,i,h,c,d,g,u,f,m,v,b,y=this.chart,k=y.jsonData.markers||{},k=k.connector||k.connectors||[],w=this.components.markerObjs,C=k.length,x=this.components.connectors,_=function(e){return function(o){var r=o.data,a=r.wrapper;a&&r.options.hoverEffect&&a.attr(r.options._hoverAttrs),t.raiseEvent("connectorrollover",e,y.chartInstance,o)}},A=function(e){return function(o){var r=o.data,a=r.wrapper;a&&r.options.hoverEffect&&a.attr(r.options._defaultAttrs),t.raiseEvent("connectorrollout",e,y.chartInstance,o)}},L=function(e){return function(o){t.raiseEvent("connectorClick",e,y.chartInstance,o)}},F=y.config.connectorOpts,R={};for(x||(x=this.components.connectors=[]),b=0;C>b;b++)v=k[b],(v.from||v.to)&&(o=w[v.from.toLowerCase()],r=w[v.to.toLowerCase()],o&&r&&(i=k[b].label,R=x[b],!R&&(R=x[b]={}),!R.config&&(e=R.config={}),!R.graphics&&(R.graphics={}),e=R.config=n({},v),e.fromMarker=o,e.toMarker=r,e.link=v.link,e.showTooltip=s(v.showtooltip,F.showTooltip),h=e.tooltext=e.showTooltip?a(v.tooltext,F.tooltext):"",c=e.thickness=a(v.thickness,F.thickness),d=e.color=a(v.color,F.color),g=e.alpha=a(v.alpha,F.alpha),e.hoverEffect=s(v.showhovereffect,F.showHoverEffect),u=a(v.hovercolor,F.hoverColor,d),f=a(v.hoveralpha,F.hoverAlpha,g),m=a(v.hoverthickness,F.hoverThickness,c),e.dashed=a(v.dashed,F.dashed),e.dashLen=s(v.dashlen,F.dashlen),e.dashGap=s(v.dashgap,F.dashgap),h&&(e.tooltext=h=p(l(h,[3,40,41,42,43],{label:i,fromId:o.config.definition.id,toId:r.config.definition.id,fromLabel:o.config.definition.label,toLabel:r.config.definition.label},void 0))),e.eventArgs={fromMarkerId:o.config.id,toMarkerId:r.config.id,label:i},e._hoverAttrs={stroke:S({color:u,alpha:f}).toString(),"stroke-width":m},e._defaultAttrs={stroke:S({color:d,alpha:g}).toString(),"stroke-width":c},e.type="line",e.onclick=L(e.eventArgs),e.onmouseover=_(e.eventArgs),e.onmouseout=A(e.eventArgs),i&&(e=R.labelConfig,!e&&(e=R.labelConfig={}),e.type="text",e.text=i,e.align="center",e.valign="middle",e.font=F.font,e.fillcolor=F.fontColor,e.bgcolor=F.labelBgColor,e.bordercolor=F.labelBorderColor,e.tooltext=F.tooltext)))},draw:function(){var t,e,o,r=this.chart,a=this.conf,i=r.components.mapAnnotations,n=this.components.markerObjs,l=r.config,s=l.markerOpts,h=l.scalingParams,l=[],c=[];e=i.addGroup({items:c}),o=i.addGroup({fillalpha:"100",items:l}),this.components.markerGroup=o,this.components.markerLabelGroup=e,a.autoScale=s.autoScale?h.sFactor:1;for(t in n)a=null,s=n[t],h=s.config,h.conIsHidden||(a=this._drawMarkerItem.call(s)),a&&(h._annotationIndex=l.length,s.markerShape=a.markerShape&&o.addItem(a.markerShape,!1,r),l.push(s.markerShape),s.markerLabel=a.markerLabel&&e.addItem(a.markerLabel,!1,r),c.push(s.markerLabel));if(this._drawConnectors(),!r.config.entityOpts.labelsOnTop){for(r=i.groups,n=0;n<r.length&&(t=r[n],t=t._id,"entityLabels"!==t);n++);t=r.splice(n,1),t={id:"entityLabels",items:t[0]&&t[0].options.items},i.addGroup(t)}},_drawMarkerItem:function(){var e,o,r=this,i=r.dataset,h=i.chart,c=h.config,d=i.conf,g=c.scalingParams,u=r.config,f=u.options,v=u.definition,b=c.markerOpts,y=g.translateX,k=g.translateY,c=b.dataLabels.style,w=f.shapeid,x=f.scale||1,S=f.label||"",_=h.config.scalingParams.scaleFactor*h.baseScaleFactor,A=(f.labelpos||"top").toLowerCase(),L=void 0===u.formattedValue?void 0:u.formattedValue,F=f.tooltext,d=s(v.radius,u.radius,b.radius)*x*d.autoScale||1e-4,v=u.fillColor,R=u.fillAlpha,E=u.fillRatio,I=u.fillAngle,T=u.borderThickness,P=u.borderColor,O=u.borderAlpha;return u.autoScale=b.autoScale?_:1,w?(F=F?p(l(F,[1,2,3],{formattedValue:L,label:S},f)):L?S+b.tooltipSepChar+L:S,void 0!==L&&null!==L?S=S+b.labelSepChar+L:isNaN(x)?x=1:0>x?x=0:x>5&&(x=5),e=function(){var e=r.markerShape,o=e.options,a=e.bounds,i=o._markerEventArgs,l=e.wrapper,s=e.fillOptions;l&&o.hovereffect&&("circle"===e.type&&(e={color:o.hoverfillcolor,alpha:o.hoverfillalpha,angle:360-o.hoverfillangle,ratio:o.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:s.radialGradient,cx:s.cx,cy:s.cy},o._hoverattrs.fill=C(e)),e=n({},o._hoverattrs),"image"===l.type&&(delete e.fill,delete e.stroke,delete e["stroke-width"]),l.attr(e)),i||(i=o._markerEventArgs={x:a.x1/a.xs,y:a.y1/a.ys,scaledX:a.x1,scaledY:a.y1,chartX:y+a.x1,chartY:k+a.y1,id:o._markerId,label:o._markerLabel}),t.raiseEventGroup(u.id,"markerRollOver",i,h.chartInstance,u,void 0,void 0,void 0)},o=function(){var e=r.markerShape,o=e.wrapper,a=e.fillOptions;o&&e.options.hovereffect&&("circle"===e.type&&(f._defaultattrs.fill=C(a)),a=n({},e.options._defaultattrs),"image"===o.type&&(delete a.fill,delete a.stroke,delete a["stroke-width"]),o.attr(a)),t.raiseEventGroup(u.id,"markerRollOut",e.options._markerEventArgs,h.chartInstance,void 0,void 0,void 0)},n(f,{x:f.x.toString(),y:f.y.toString(),fillcolor:v,fillalpha:R,fillratio:E,fillangle:I,borderthickness:T,bordercolor:P,borderalpha:O,hovereffect:a(b.showHoverEffect),radius:d.toString(),tooltext:b.showTooltip?F:0,link:f.link,showshadow:s(f.showshadow,u.shadow),_markerLabel:S,_markerId:f.id,id:(f.id+"").toLowerCase(),onmouseover:function(){e()},onmouseout:function(){o()},onclick:function(e){t.raiseEvent("markerClick",e.data.options._markerEventArgs,h.chartInstance,e)}}),"triangle"===w?n(f,{type:"polygon",sides:3,startangle:b.startAngle}):"diamond"===w?n(f,{type:"polygon",sides:4,startangle:b.startAngle}):"arc"===w?n(f,{type:"arc",startangle:0,endangle:360,innerradius:.6*d}):"circle"===w?f.type="circle":(w=i.getShapeArgs.call(r),b.dataEnabled&&b.valueToRadius&&void 0!==f.radius?delete w.radius:(!w.radius&&(w.radius=b.radius),w.radius=w.radius*x*u.autoScale),n(f,w),f.id=f._markerId&&f._markerId.toLowerCase()),n(f,{hoverfillcolor:a(f.fillhovercolor,b.hoverFillColor,f.fillcolor),hoverfillalpha:a(f.fillhoveralpha,b.hoverFillAlpha,f.fillalpha),hoverfillratio:a(f.fillhoverratio,b.hoverFillRatio,f.fillratio),hoverfillangle:a(f.fillhoverangle,b.hoverFillAngle,f.fillangle),hoverborderthickness:s(f.borderhoverthickness,b.hoverBorderThickness,f.borderthickness),hoverbordercolor:a(f.borderhovercolor,b.hoverBorderColor,f.bordercolor),hoverborderalpha:a(f.borderhoveralpha,b.hoverBorderAlpha,f.borderalpha)}),x={alpha:f.fillalpha,color:f.fillcolor,angle:360-f.fillangle,ratio:f.fillratio},w={alpha:f.hoverfillalpha,color:f.hoverfillcolor,angle:360-f.hoverfillangle,ratio:f.hoverfillratio},f._defaultattrs={fill:C(x),"stroke-width":"0"!==f.showborder?f.borderthickness:0,stroke:m(f.bordercolor,f.borderalpha)},f._hoverattrs={fill:C(w),"stroke-width":"0"!==f.showborder?f.hoverborderthickness:0,stroke:m(f.hoverbordercolor,f.hoverborderalpha)},"image"===f.type&&(f.borderthickness=f.borderthickness||0,f.onload=function(t){var e=this.options,o=t.width;t=t.height;var r,a=(Number(e.x)-o/(2*g.sFactor))*g.sFactor,e=(Number(e.y)-t/(2*g.sFactor))*g.sFactor;if(o&&t)for(r in{wrapper:1,tracker:1})this[r]&&this[r].attr({x:a,y:e,width:o,height:t})}),u.drawOptions.shape=f,b.showLabels?(x=f.labelpadding||b.labelPadding,A=i._getLabelOptions(A,x,f),w=A.align,_=A.valign,d=u._labelBaseWidth,L=u._labelBaseHeight,v=u._labelXOffset,F=u._labelYOffset,d=b.labelWrapWidth?b.labelWrapWidth:i.getWrapWidth[w](d,Number(A.x)+v),i=b.labelWrapHeight?b.labelWrapHeight:i.getWrapHeight[_](L,Number(A.y)+F),d>x&&(d-=x),i>x&&(i-=x),u.drawOptions.label="center"==w&&"middle"==_?n({type:"text"},{text:S,tooltext:f.tooltext,x:A.x,y:A.y,align:w,valign:A.valign,wrap:1,wrapwidth:d,wrapheight:i,fontsize:c.fontSize/g.sFactor,font:c.fontFamily,fillcolor:c.fontColor,onmouseover:function(){e()},onmouseout:function(){o()}}):n({type:"text"},{text:S,tooltext:f.tooltext,x:A.x,y:A.y,align:w,valign:A.valign,wrap:1,wrapwidth:d,wrapheight:i,fontsize:c.fontSize/g.sFactor,font:c.fontFamily,fillcolor:c.fontColor}),{markerShape:f,markerLabel:u.drawOptions.label}):{markerShape:f}):void 0},_drawConnectors:function(){var t,e,o,r,a,i=this.chart,n=this.components.connectors,l=n.length,s=i.config.scalingParams,h=i.config.connectorOpts,c=h.showLabels,d=i.components.mapAnnotations,p=[],g=[],u=[];for(u.push({id:"connectorLabels",fillalpha:"100",items:g}),u.push({id:"connectors",fillalpha:"100",items:p}),t=0;l>t;t++)n[t]&&(o=n[t].config.fromMarker.config,a=n[t].config.toMarker.config,e=o.options.x,o=o.options.y,r=a.options.x,a=a.options.y,n[t].config.x=e,n[t].config.y=o,n[t].config.tox=r,n[t].config.toy=a,p.push(n[t].config),n[t].labelConfig&&c&&(n[t].labelConfig.x=((Number(e)+Number(r))/2).toString(),n[t].labelConfig.y=((Number(o)+Number(a))/2).toString(),n[t].labelConfig.fontsize=h.fontSize/(s.scaleFactor*i.baseScaleFactor),g.push(n[t].labelConfig)));d.addGroup(u[0]),d.addGroup(u[1])},getShapeArgs:function(){var t,e=this.config,o=n({},this.shapeObj);return e.autoScale=1,o?("polygon"===o.type?3>o.sides?o.type="circle":o.startangle=e.startAngle:"arc"===o.type&&(t=(o.radius||e.markerRadius)*e.autoScale,o.radius=t,o.innerradius=o.innerradius&&o.innerradius*e.autoScale||.6*t),o):null},_getLabelOptions:function(t,e,o,r,a){var i,n=t&&t.toLowerCase();return this.getLabelAlignment[n]||(n="center"),t=Number(o.x),i=Number(o.y),o=void 0===r||void 0===a?o.radius||0:/^(top|bottom)$/gi.test(n)&&.5*a||/^(left|right)$/gi.test(n)&&.5*r||0,o=Number(o)+Number(e),this.getLabelAlignment[n](t,i,o)},getLabelAlignment:{top:function(t,e,o){return{x:t.toString(),y:(e-o).toString(),align:"center",valign:"top"}},left:function(t,e,o){return{x:(t-o).toString(),y:e.toString(),align:"right",valign:"middle"}},right:function(t,e,o){return{x:(t+o).toString(),y:e.toString(),align:"left",valign:"middle"}},bottom:function(t,e,o){return{x:t.toString(),y:(e+o).toString(),align:"center",valign:"bottom"}},center:function(t,e){return{x:t.toString(),y:e.toString(),align:"center",valign:"middle"}}},getWrapWidth:{right:function(t,e){return e},left:function(t,e){return t-e},center:function(t,e){return 2*k(e,t-e)}},getWrapHeight:{top:function(t,e){return e},middle:function(t,e){return 2*k(e,t-e)},bottom:function(t,e){return t-e}},addMarkerItem:function(t){var e,o,r=this.components.markerObjs,a=this.components.shapeObjs,i=this.components.markerGroup,n=this.components.markerLabelGroup;(o=t.id.toLowerCase())&&!r[o]&&(delete t.value,t=this._initializeMarkerItem(o,t,null),t.dataset=this,(e=t.config.options.shapeid)&&(t.shapeObj=a[e&&e.toLowerCase()]),r[o]=t,r=this._drawMarkerItem.call(t),i&&n&&(t.markerShape=r.markerShape&&i.addItem(r.markerShape,!0),t.markerLabel=r.markerLabel&&n.addItem(r.markerLabel,!0)))},updateMarkerItem:function(t,e){var o,r=this.chart.components.mapAnnotations,a=this.components.markerObjs[t];a&&(o=a.config.options,n(o,e),o=this._drawMarkerItem.call(a).markerShape,r.update(t,o))},_removeMarkerItem:function(t){var e,o=this.components.markerObjs,r=o[t];r&&(e=r.markerShape,r=r.markerLabel,e&&e.destroy(),r&&r.destroy()),delete o[t]}},"Entities"])},[3,2,0,"release"]]);