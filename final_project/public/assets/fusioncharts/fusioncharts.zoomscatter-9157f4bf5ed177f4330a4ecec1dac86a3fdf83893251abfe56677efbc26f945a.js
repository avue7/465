FusionCharts.register("module",["private","modules.renderer.js-zoomscatter",function(){function t(){}var a,e,i=this,o=i.hcLib,s=o.parseTooltext,n=o.Raphael,r=o.addEvent,c=o.removeEvent,l=i.window,h=l.MouseEvent,g=l.document,d=o.BLANKSTRING,u=o.pluck,v=o.pluckNumber,p=o.getFirstValue,m=o.toRaphaelColor,f=o.hasSVG,x=o.isIE,y=o.getFirstColor,b=o.hasTouch,T="rgba(192,192,192,"+(x?.002:1e-6)+")",_=Math,w=_.round,F=_.min,C=_.max,L=_.abs,E=_.cos,k=_.sin,P=_.floor,S=2*Math.PI,M=o.getMouseCoordinate,X=o.POSITION_BOTTOM,Y=o.chartAPI,D=o.HUNDREDSTRING,_=!/fusioncharts\.com$/i.test(l.location.hostname),I=function(t,a){var e=M(a.linkedItems.container,t),i=e.chartX,o=e.chartY,s=a.config,n=s.canvasLeft,r=s.canvasTop,c=s.canvasLeft+s.canvasWidth,s=s.canvasHeight+s.canvasTop;return e.insideCanvas=!1,e.originalEvent=t,i>n&&c>i&&o>r&&s>o&&(e.insideCanvas=!0),e},V=function(t,a,e){var i;a&&t&&(e||(e={}),e.originalEvent&&(e=e.originalEvent),e.touches&&(e=e.touches[0]),a.dispatchEvent?(h?i=new h(t,{bubbles:!!e.bubbles,cancelable:!!e.cancelable,clientX:e.clientX||e.pageX&&e.pageX-g.body.scrollLeft-g.documentElement.scrollLeft||0,clientY:e.clientY||e.pageY&&e.pageY-g.body.scrollTop-g.documentElement.scrollTop||0,screenX:e.screenX||0,screenY:e.screenY||0,pageX:e.pageX||0,pageY:e.pageY||0}):g.createEvent&&(i=g.createEvent("HTMLEvents"),i.initEvent(t,!!e.bubbles,!!e.cancelable)),i.eventName=t,i&&a.dispatchEvent(i)):g.createEventObject&&a.fireEvent&&(i=g.createEventObject(),i.eventType=t,i.eventName=t,a.fireEvent("on"+t,i)))};Y("zoomscatter",{standaloneInit:!0,defaultDatasetType:"zoomscatter",applicableDSList:{zoomscatter:!0},friendlyName:"ZoomScatter Chart",isXY:!0,defaultZeroPlaneHighlighted:!1,creditLabel:_,configure:function(){var t,a=this.config;Y.scatter.configure.apply(this,arguments),t=this.jsonData.chart,a.stepZoom=1-v(t.stepzoom,25)/100,a.showToolBarButtonToolText=v(t.showtoolbarbuttontooltext,1),a.btnResetChartToolText=u(t.btnresetcharttooltext,"Reset Chart"),a.btnZoomOutToolText=u(t.btnzoomouttooltext,"Zoom out to previous level"),a.btnZoomInToolText=u(t.btnzoomintooltext,"<strong>Zoom in</strong><br/>Or double-click on plot to zoom-in"),a.btnSelectZoomToolText=u(t.btnselectzoomtooltext,"<strong>Select a region to zoom-in</strong><br/>Click to enable pan mode."),a.btnPanToolText=u(t.btnpantooltext,"<strong>Drag to move across chart</strong><br/>Click to enable select-zoom mode.")},_setAxisLimits:function(){var t,a,e=this.jsonData,i=this.components.xAxis,o=u(e.chart.xaxislabelmode,"categories"),e=e.categories&&e.categories[0],e=(e&&e.category||[]).slice(),s=1/0,n=-(1/0);if("auto"===o||0===e.length){for(Y.mscartesian._setAxisLimits.call(this),o=i[0].getLimit(),i[0].setAxisData({hasCategory:0}),i[0].resetCategoryAxisComponents(),t=0;t<e.length;t+=1)(a=e[t].x)&&(s>a&&(s=a),a>n&&(n=a));(n>o.max||s<o.min)&&(n=C(n,o.max),s=F(s,o.min),i[0].setDataLimit(n,s))}else i[0].resetNumericAxisComponents(),Y.scatterBase._setAxisLimits.call(this)},_createAxes:function(){var t=this.components;Y.scatter._createAxes.call(this,arguments),t.yAxis[0].setAxisConfig({animateAxis:!1}),t.xAxis[0].setAxisConfig({animateAxis:!1})},_spaceManager:function(){var t,a,e=this.config,i=this.components,o=i.xAxis&&i.xAxis[0];a=i.yAxis&&i.yAxis||[];var s,n,r=i.legend.config.legendPos,c=e.xDepth,l=e.yDepth,h=e.canvasBgDepth,g=e.canvasBaseDepth,d=e.canvasBasePadding,u=i.canvas.config.canvasBorderWidth,v=e.realTimeConfig&&e.realTimeConfig.showRTValue,p=e.borderWidth,m=e.canvasMarginTop,f=e.canvasMarginBottom,x=e.canvasMarginLeft,y=e.canvasMarginRight,i=e.minCanvasHeight,b=e.minCanvasWidth;t=e.minChartWidth;var T,_,w=e.minChartHeight,F=e.height,C=e.width,L=e._initConfig||(e._initConfig={}),E=!1,k=e.origCanvasTopMargin,P=e.origCanvasBottomMargin,S=[];for(L.canvasLeft=e.canvasLeft,L.canvasWidth=e.canvasWidth,L.canvasHeight=e.canvasHeight,L.canvasTop=e.canvasTop,L.availableHeight=e.availableHeight,L.availableWidth=e.availableWidth,e.canvasWidth-2*p<t&&(n=(e.canvasWidth-t)/2),e.canvasHeight-2*p<w&&(s=(e.canvasHeight-w)/2),this._allocateSpace({top:s||p,bottom:s||p,left:n||p,right:n||p}),e.origCanvasWidth=e.canvasWidth,e.origCanvasLeft=e.canvasLeft,e.canvasRight=e.canvasLeft+e.canvasWidth,e.origCanvasRight=e.canvasRight,p=0,n=a.length;n>p;p++)s=a[p],t=.7*e.availableWidth,t=s&&s.placeAxis(t)||{},S.push({axisIndex:p,spaceTaken:t}),s&&this._allocateSpace(t);a=.7*e.canvasHeight,this._manageActionBarSpace&&this._allocateSpace(this._manageActionBarSpace(a)),this._manageLegendSpace(void 0),l&&(this._allocateSpace({bottom:l}),e.shift=c+d+g),h&&this._allocateSpace({right:h}),e.canvasWidth-2*u<b&&(_=(e.canvasWidth-b)/2),this._allocateSpace({left:_||u,right:_||u}),b>C-x-y&&(l=e.canvasWidth-b,c=x+y,x=e.canvasMarginLeft=l*x/c,y=e.canvasMarginRight=l*y/c),x=x>e.canvasLeft?x-e.canvasLeft:0,this._allocateSpace({left:x,right:y>C-e.canvasRight?y+e.canvasRight-C:0}),a=r===X?.6*e.canvasHeight:.6*e.canvasWidth,this._manageChartMenuBar(a),a=.2*e.availableHeight,this._allocateSpace(this._getSumValueSpace(a)),a=.3*e.availableHeight,e.origCanvasHeight=e.canvasHeight,e.canvasBottom=e.canvasTop+e.canvasHeight,e.origCanvasBottom=e.canvasBottom,e.origCanvasTop=e.canvasTop,e.realtimeEnabled&&(v?this._allocateSpace(this._realTimeValuePositioning(a)):this._hideRealTimeValue()),a=.6*e.availableHeight,e.xAxisSpaceAllocation=r=o&&o.placeAxis(a),o&&this._allocateSpace(r),this._getDSspace&&this._allocateSpace(this._getDSspace(.4*e.canvasWidth)),a=.3*e.availableHeight,this._manageScrollerPosition&&this._manageScrollerPosition(a),e.canvasHeight-2*u<i&&(T=(e.canvasHeight-i)/2),this._allocateSpace({top:T||u,bottom:T||u}),this._allocateSpace({bottom:g}),i>F-m-f&&(E=!0,l=e.canvasHeight-i,c=m+f,m=e.canvasMarginTop=l*m/c,f=e.canvasMarginBottom=l*f/c),o=m>e.canvasTop?m-e.canvasTop:0,g=f>F-e.canvasBottom?f+e.canvasBottom-F:0,this._allocateSpace({top:o,bottom:g}),E&&(c=k+P,E=e.canvasHeight,E>i&&(l=E-i,o=l*k/c,g=l*P/c),this._allocateSpace({top:o,bottom:g})),e.actualCanvasMarginTop=o,e.actualCanvasMarginLeft=x},_createToolBox:function(){var t,a,e,o,s,n,r,c,l,h=this,g=h.config;o=h.components,t=o.chartMenuBar,l=g.showToolBarButtonToolText;var u=g.stepZoom;t&&t.drawn||(Y.mscartesian._createToolBox.call(h),t=o.tb,a=t.graphics||(t.graphics={}),e=t.getAPIInstances(t.ALIGNMENT_HORIZONTAL),e=e.Symbol,o=o.chartMenuBar.componentGroups[0],s=a.zoomInButton=new e("zoomInIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){h.zoom(u)},tooltext:l&&g.btnZoomInToolText||d}),n=a.zoomOutButton=new e("zoomOutIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){var t=g.viewPortHistory;1<t.length&&(t=t.slice(-2,-1)[0],h.updateVisual(t.x,t.y,t.scaleX,t.scaleY))},tooltext:l&&g.btnZoomOutToolText||d}),r=a.resetButton=new e("resetIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){var t=g.viewPortConfig,a=h.graphics;1<g.viewPortHistory.length&&(t.isReset=!0,h.zoomSelection(0,0,g.canvasWidth,g.canvasHeight),g.viewPortHistory.splice(1),a.trackerGroup.attr({cursor:"default"}),h.updateButtonVisual(),h.updateSelectionBox(0,0,0,0)),i.raiseEvent("zoomReset",{},h.chartInstance,[h.chartInstance.id])},tooltext:l&&g.btnResetChartToolText||d}),c=a.toggleZoomInButton=new e("zoomModeIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){h.toogleDragPan(!0)},tooltext:l&&g.btnSelectZoomToolText||d}),l=a.togglePanButton=new e("panModeIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){h.toogleDragPan(!0)},tooltext:l&&g.btnPanToolText||d}),o.addSymbol(l,!0),o.addSymbol(c,!0),o.addSymbol(r,!0),o.addSymbol(n,!0),o.addSymbol(s,!0))},_createLayers:function(){var t=this.graphics,a=this.components.paper;Y.scatter._createLayers.call(this),!t.imageContainer&&(t.imageContainer=a.group("dataset-orphan",t.datasetGroup)),this.__preDraw()},_dist:function(t,a){var e,i=this.components;return e=i.xAxis[0],i=i.yAxis[0],t&&a?(e=(t.x-a.x)*e.getPVR(),i=(t.y-a.y)*i.getPVR(),Math.sqrt(Math.pow(e,2)+Math.pow(i,2))):void 0},__preDraw:function(){var t=this.graphics,a=t.imageContainer,e=this.config,i=e.canvasLeft,o=e.canvasTop,s=e.canvasWidth,n=e.canvasHeight,l=this.jsonData.chart,h=this.linkedItems,h=h.eventListeners||(h.eventListeners=[]),g=this.linkedItems.container,d=this.components.paper;e.updateAnimDuration=500,a.transform("t"+i+","+o),a.attr({"clip-rect":i+","+o+","+s+","+n}),e.status="zoom",e.maxZoomLimit=v(l.maxzoomlimit,1e3),e.viewPortHistory=[{scaleX:1,scaleY:1,x:0,y:0}],!t.trackerElem&&(t.trackerElem=d.rect(i,o,s,n,0,t.trackerGroup).attr({fill:T,stroke:T})),c(g,b?"touchstart":"mousemove",this.searchMouseMove),h.push(r(g,"touchstart mousemove",this.searchMouseMove,this)),this.zoomPanManager(a)},searchMouseMove:function(t){var a,e,i,o=t.data,s=o.config,n=s.viewPortConfig;e=o.components;var r=e.xAxis[0],c=e.yAxis[0];o.linkedItems.container&&!s.isDragging&&((a=I(t,o))&&a.insideCanvas?(e=s.canvasTop,i=s.canvasLeft,n.lastMouseCoordinate={x:Number(r.getValue(a.chartX-i)),y:Number(c.getValue(a.chartY-e))},clearTimeout(n.neighbourSearchTimer),s.lastMouseEvent=t,n.neighbourSearchTimer=setTimeout(function(){s.isDragging||o._bestNeighbour(n.lastMouseCoordinate)},100)):o.highlightPoint(!1))},updateSelectionBox:function(t,a,e,i){var o=this.config,s=this.graphics,n=this.components.paper,r=o.viewPortConfig,c=o.cursor,l=s.selectionBox,h=o.canvasRight,g=o.canvasLeft,d=o.canvasTop,u=o.canvasBottom,v=e>t?t:e,p=i>a?a:i,m=t>e?t:e,f=a>i?a:i,x=e-t,y=a-i,c=c?x>0&&y>0?"ne-resize":0>x&&y>0?"nw-resize":0>x&&0>y?"sw-resize":x>0&&0>y?"se-resize":"default":"default",v=g>v?g:v>h?h:v,p=d>p?d:p>u?u:p,x=t===e&&a===i?0:(m>h?h:g>m?g:m)-v,y=t===e&&a===i?0:(f>u?u:d>f?d:f)-p;l?l.attr({x:v,y:p,width:x,height:y,cursor:c}):s.selectionBox=n.rect(v,p,x,y).attr({"stroke-width":1,stroke:"red",fill:"#00FF00",opacity:.2,cursor:c}),s.trackerGroup.attr({cursor:c}),o.cursor=c,r.selectionDimensions||(r.selectionDimensions={startX:0,endX:0,startY:0,endY:0}),r.selectionDimensions.startX=t,r.selectionDimensions.endX=a,r.selectionDimensions.startY=e,r.selectionDimensions.endY=i},getValue:function(t){var a=this.config,e=this.components,i=a.viewPortConfig;t=this.getOriginalPositions(t.x,t.y,t.x,t.y);var o=e.xAxis[0].config.axisRange,e=e.yAxis[0].config.axisRange,s=o.min,n=e.max;return{x:s+(t[0]-a.canvasLeft)/(a.canvasWidth*i.scaleX/(o.max-s)),y:n-(t[1]-a.canvasTop)/(a.canvasHeight*i.scaleY/(n-e.min))}},_getTouchViewPort:function(t,a,e){var i,o;o=this.config;var s=o.canvasLeft,n=o.canvasTop;i=o.canvasWidth,o=o.canvasHeight;var r=F(t[0].chartX,t[1].chartX)-s,c=F(t[0].chartY,t[1].chartY)-n,l=Math.abs(t[1].chartX-t[0].chartX);t=Math.abs(t[1].chartY-t[0].chartY);var s=F(a[0].chartX,a[1].chartX)-s,n=F(a[0].chartY,a[1].chartY)-n,h=Math.abs(a[1].chartX-a[0].chartX),g=Math.abs(a[1].chartY-a[0].chartY);return a=h/l*e.scaleX,l=g/t*e.scaleY,r=e.x+r/e.scaleX-s/a,e=e.y+c/e.scaleY-n/l,r=0>r?0:r,e=0>e?0:e,l=1>l?1:l,a=1>a?1:a,i-=i/a,o-=o/l,{x:r>i?i:r,y:e>o?o:e,scaleX:a,scaleY:l}},getOriginalPositions:function(t,a,e,i){var o=this.config,s=o.viewPortConfig,n=s.scaleX,r=s.scaleY,c=s.x,s=s.y,l=F(t,e);return t=C(t,e),e=F(a,i),a=C(a,i),t=t>o.canvasWidth?o.canvasWidth:t,a=a>o.canvasHeight?o.canvasHeight:a,l=0>l?0:l,e=0>e?0:e,[c+l/n,s+e/r,(t-l)/n,(a-e)/r]},zoomSelection:function(t,a,e,i){var o=this.config;e&&i&&(e=Math.abs(o.canvasWidth/e),i=Math.abs(o.canvasHeight/i),this.updateVisual(t,a,e,i))},toogleDragPan:function(t){var a=this.config,e=a.status;t&&(a.status="zoom"===e?"pan":"zoom",i.raiseEvent("zoomModeChanged",{panModeActive:a.status},this.chartInstance,[this.chartInstance.id])),this.updateButtonVisual()},updateManager:function(t){var a,e=this.components.dataset,i=e.length;for(a=0;i>a;a+=1)e[a].draw(t);t||this._drawQuadrant()},zoomPanManager:function(){var t,a,e=[],o=[],s=this,n=s.config,c=s.graphics,l=s.components,h=l.eventListeners||(l.eventListeners=[]),g=s.viewPortConfig,d=!1,u=0,v={},p=function(t){var a=t.chartX,e=t.chartY,i=n.canvasLeft,o=n.canvasTop,s=n.canvasRight,r=n.canvasBottom;i>a&&(t.chartX=C(a,i)),a>s&&(t.chartX=F(a,s)),o>e&&(t.chartY=C(e,o)),e>r&&(t.chartY=F(e,r))},m={start:function(a){g=n.viewPortConfig,b=!!a.touches,e[0]=I(a,s),s.updateSelectionBox(0,0,0,0),b&&(d=!1,t=a.touches.length,2===t&&(d=!0,v.x=g.x,v.y=g.y,v.scaleX=g.scaleX,v.scaleY=g.scaleY,e[0]=I(a.touches.item(0),s),e[1]=I(a.touches.item(1),s))),n.isDragging=!1,"pan"===n.status&&(n.panStartX=g.x,n.panStartY=g.y,e[0].insideCanvas&&c.trackerGroup.attr({cursor:"move"}))},on:function(t){var a,r,h,u;h=n.panStartX;var p=n.panStartY;a=g.scaleX,r=g.scaleY;var m=l.xAxis[0],f=l.yAxis[0];b=!!t.touches,o[0]=I(t,s),o[0].insideCanvas?"pan"===n.status&&c.trackerGroup.attr({cursor:"move"}):c.trackerGroup.attr({cursor:"default"}),b&&t&&(u=t.touches.length,2===u?(d=!0,o[0]=I(t.touches.item(0),s),o[1]=I(t.touches.item(1),s)):d=!1),!n.isDragging&&(!b||2<L(o[0].chartX-e[0].chartX)||2<L(o[0].chartY-e[0].chartY))&&(n.isDragging=!0,s.highlightPoint(!1),"zoom"===n.status&&(e[0].pointValue=s.getValue({x:e[0].chartX,y:e[0].chartY}),i.raiseEvent("selectionStart",{chartX:e[0].chartX,chartY:e[0].chartY,pageX:e[0].pageX,pageY:e[0].pageY,selectionTop:e[0].chartX+n.canvasLeft,selectionLeft:e[0].chartY+n.canvasTop,selectionWidth:0,selectionHeight:0,startXVAlue:e[0].pointValue.x,startYVAlue:e[0].pointValue.y},s.chartInstance,[s.chartInstance.id]))),n.isDragging&&(d?(e[0].insideCanvas||e[1].insideCanvas)&&(h=s._getTouchViewPort(e,o,v),s.updateVisual(h.x,h.y,h.scaleX,h.scaleY,!0)):"zoom"===n.status?s.updateSelectionBox(e[0].chartX,e[0].chartY,o[0].chartX,o[0].chartY):"pan"!==n.status||1===a&&1===r||!e[0].insideCanvas||(t=e&&o[0].chartX-e[0].chartX,u=e&&o[0].chartY-e[0].chartY,h-=t/a,p-=u/r,a=n.canvasWidth*(a-1)/a,r=n.canvasHeight*(r-1)/r,g.x=h>a?a:0>h?0:h,g.y=p>r?r:0>p?0:p,s.updateManager(),m.draw(),f.draw()))},end:function(t){var r,l=I(t,s),h=n.canvasLeft,g=n.canvasTop;r=n.canvasWidth/4;var m=n.canvasHeight/4,l=isNaN(l.chartX)||isNaN(l.chartY)?o[0]||e[0]:l;n.isDragging?(d?((e[0].insideCanvas||e[1].insideCanvas)&&(t=s._getTouchViewPort(e,o,v),s.updateVisual(t.x,t.y,t.scaleX,t.scaleY)),d=!1):"zoom"===n.status&&(t=l,r=e[0],p(r),p(t),g=s.getOriginalPositions(r.chartX-h,r.chartY-g,t.chartX-h,t.chartY-g))&&(t.pointValue=s.getValue({x:t.chartX,y:t.chartY}),i.raiseEvent("selectionEnd",{chartX:t.chartX,chartY:t.chartY,pageX:t.pageX,pageY:t.pageY,selectionTop:t.chartX+n.canvasLeft,selectionLeft:t.chartY+n.canvasTop,selectionWidth:Math.abs(t.chartX-r.chartX),selectionHeight:Math.abs(t.chartY-r.chartY),startXVAlue:r.pointValue.x,startYVAlue:r.pointValue.y,endXValue:t.pointValue.x,endYValue:t.pointValue.y},s.chartInstance,[s.chartInstance.id]),r.chartX!==t.chartX&&r.chartY!==t.chartY&&s.zoomSelection(g[0],g[1],g[2],g[3]),s.updateSelectionBox(0,0,0,0)),n.isDragging=!1,t=o[0]||e[0],t.data=s,s.searchMouseMove(t)):l.insideCanvas&&(u+=1,setTimeout(function(){u=0,a=void 0},500),2===u?!(!t||!t.touches)===a&&(h=l.chartX-h,g=l.chartY-g,g=s.getOriginalPositions(h-r,g-m,h+r,g+m),s.zoomSelection(g[0],g[1],g[2],g[3]),t.preventDefault()):a=!(!t||!t.touches)),c.trackerGroup.attr({cursor:"default"})}};h.push(r(s.linkedItems.container,"pointerdrag",function(t){m[t.state](t.originalEvent)}))},_drawDataset:function(){var t,a=this.components.dataset,e=a.length;for(t=0;e>t;t+=1)a[t]._deleteGridImages(),a[t].graphics._grid={};this.updateVisual()},updateVisual:function(t,a,e,o,s){var n,r,c,l,h;n=this.config;var g=this.components,u=n.viewPortConfig;h=n.canvasWidth;var v=n.canvasHeight,p=h,m=v,f=n.viewPortHistory,m=f.slice(-1)[0],x=[],x=n.status,y=n._initConfig;if(r=g.xAxis[0],l=g.yAxis[0],c=this.graphics,g=(g=g.quadrant)&&g.graphics.container,p=n.maxZoomLimit,u.x=isNaN(t)?t=m.x:t,u.y=isNaN(a)?a=m.y:a,u.scaleX=e||(e=m.scaleX),u.scaleY=o||(o=m.scaleY),e>p&&(u.x=t=F(t,h-h/p),u.scaleX=e=p),o>p&&(u.y=a=F(a,v-v/p),u.scaleY=o=p),s)this.updateManager(s);else for(e>1||o>1?("zoom"===x&&this.toogleDragPan(!0),e>=m.scaleX||o>=m.scaleY?(f.push({scaleX:e,scaleY:o,x:t,y:a}),x=["zoomed","zoomIn"]):(f.pop(),m=f.slice(-1)[0],u.x=m.x,u.y=m.y,u.scaleX=m.scaleX,u.scaleY=m.scaleY,x=["zoomed","zoomOut"])):(1<f.length&&f.pop(),"pan"===x&&this.toogleDragPan(!0),x=["zoomed","zoomOut"]),this.toogleDragPan(),p=n.canvasWidth,m=n.canvasHeight,t&&(t=u.x*=p/h),a&&(u.y*=m/v),n.canvasLeft=y.canvasLeft,n.canvasWidth=y.canvasWidth,n.canvasHeight=y.canvasHeight,n.canvasTop=y.canvasTop,n.availableHeight=y.availableHeight,n.availableWidth=y.availableWidth,this._spaceManager(),this._postSpaceManagement(),this.updateManager(),r.draw(),l.draw(),this._drawCanvas(),h={"clip-rect":n.canvasLeft+","+n.canvasTop+","+n.canvasWidth+","+n.canvasHeight},n.viewPortConfig&&this.graphics.imageContainer.attr({x:n.canvasLeft,y:n.canvasRight}),c.imageContainer.attr(h).transform("T"+n.canvasLeft+","+n.canvasTop),c.tracker&&c.tracker.attr(h),g&&g.attr(h),n=r.getValue(0),r=r.getValue(p),c=l.getValue(0),l=l.getValue(m),0===arguments.length&&(x=d),h=0;h<x.length;h+=1)"zoomed"===x[h]&&i.raiseEvent("zoomed",{level:f.length,startX:n,startY:c,endX:r,endY:l},this.chartInstance,[this.chartInstance.id]),"zoomIn"===x[h]?i.raiseEvent("zoomedIn",{level:f.length,startX:n,startY:c,endX:r,endY:l},this.chartInstance,[this.chartInstance.id]):"zoomOut"!==x[h]||u.isReset||i.raiseEvent("zoomedOut",{level:f.length,startX:n,startY:c,endX:r,endY:l},this.chartInstance,[this.chartInstance.id]);this.highlightPoint(!1),u.isReset=!1},getFillColor:function(t,a){return a=parseFloat(a/100),0>a?a=0:a>1&&(a=1),t||(t="#FFFFFF"),x&&!f?a?t:"transparent":(t=t.replace(/^#?([a-f0-9]+)/gi,"$1"),t=o.graphics.HEXtoRGB(t),t[3]=a.toString(),"rgba("+t.join(",")+")")},_bestNeighbour:function(t){var a,e,i,o,n,r,c,l,h,g,v,p,m=this.components,f=this.config,x=m.xAxis[0],y=m.yAxis[0],b=this.jsonData.chart,T=f.canvasLeft,_=f.canvasTop;for(p=m.numberFormatter,h=m.dataset,a=h.length-1;a>=0&&(m=h[a],v=m.config,e=v.showHoverEffect,l=v.showTooltip,!(m.components.kDTree&&m.visible&&(o=m.getElement(t),m=this._dist(t,o),!n||r>m)&&(i=a,n=o,r=m,c=h[i]&&v.zoomedRadius||0,c>=r)));--a);r<=C(c+2,5)?(t=x.getPixel(n.x)-T,_=y.getPixel(n.y)-_,T=u(n.tooltext,v.plotToolText),m=h[i],v=m.config,h=v.tooltip.toolTipSepChar,r=v.tooltip.seriesNameInToolTip,c=n.x,a=n.y,n&&(g=p.yAxis(a),p=p.xAxis(c),g=Number(l)?void 0!==T?s(T,[4,5,6,7,8,9,10,11],{yaxisName:y.getAxisData("axisName"),xaxisName:x.getAxisData("axisName"),yDataValue:g,xDataValue:p},n,b,m.config):(r&&v.seriesname?v.seriesname+h:"")+"x:"+p+h+"y:"+g:d),f.lastHoveredPoint!==n&&this.highlightPoint(e,t,_,n,i,g)):this.highlightPoint(!1)},highlightPoint:function(t,a,e,i,s,n){var r=this,c=r.config,l=r.components,h=r.graphics,g=l.paper,d=h.tracker,u=(l=l.dataset[s])&&l.config;s=l&&u.zoomedRadius||0;var v=l&&u.hoverCosmetics,l=v&&v.fill,u=v&&v.borderColor,v=v&&v.borderThickness,p={},p=function(t){o.plotEventHandler.call(this,r,t)},m=function(t){o.plotEventHandler.call(this,r,t,"dataplotRollover")},f=function(t){o.plotEventHandler.call(this,r,t,"dataplotRollout")},x=i&&i.link;d||(d=h.tracker=g.circle(0,0,0,h.trackerGroup).attr({"clip-rect":c.canvasLeft+","+c.canvasTop+","+c.canvasWidth+","+c.canvasHeight}).click(p).trackTooltip(!0).hover(m,f)),i&&d.data("eventArgs",{x:i.x,y:i.y,tooltip:n,link:x}),c.lastHoveredPoint=i,p=Number(t)?{r:s,fill:l,stroke:u,"stroke-width":v}:{r:s,fill:T,stroke:T,"stroke-width":0},p.cursor=x?"pointer":"",d.attr(p).tooltip(n).transform("t"+(a+c.canvasLeft)+","+(e+c.canvasTop)),i&&V("mouseover",d&&d.node,c.lastMouseEvent)},zoom:function(t){var a,e,i=this.config,o=i.viewPortConfig;a=o.x,e=o.y;var s=i.canvasWidth,i=i.canvasHeight,n=s/o.scaleX,r=i/o.scaleY,o=n*t;t*=r,o=o>s?s:o,t=t>i?i:t,a=a+n/2-o/2,e=e+r/2-t/2,a=0>a?0:a,e=0>e?0:e,a=a+o>s?s-o:a,e=e+t>i?i-t:e,this.zoomSelection(a,e,o,t)},updateButtonVisual:function(){var t,a,e,i;e=this.config;var o=this.components.tb.graphics;t=e.status;var s;for(1>=e.viewPortHistory.length?(e=["zoomOutButton","resetButton","togglePanButton"],i=["zoomInButton"],s="toggleZoomInButton"):(i=["resetButton","zoomOutButton","zoomInButton"],e=[],"zoom"===t?(i.push("togglePanButton"),s="toggleZoomInButton"):"pan"===t&&(i.push("toggleZoomInButton"),s="togglePanButton")),t=0;t<e.length;t+=1)a=e[t],o[a].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"},normal:{fill:"#FFFFFF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],"button-disabled":!1,stroke:"#E3E3E3","stroke-opacity":1});for(t=0;t<i.length;t+=1)a=i[t],o[a].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#aaaaaa",cursor:"pointer"},normal:{fill:"#FFFFFF",stroke:"#C2C2C2","stroke-width":1,cursor:"pointer"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"pointer"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#C2C2C2",cursor:"pointer"}},"button-disabled":!1,fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],stroke:"#C2C2C2","stroke-opacity":1});o[s].node.attr({config:{hover:{fill:"#EFEFEF","stroke-width":1,stroke:"#EFEFEF",cursor:"default"},normal:{fill:"#EFEFEF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#E6E6E6","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},"button-disabled":!1,fill:["#EFEFEF","#EFEFEF","#EFEFEF","#EFEFEF",!0],stroke:"#E3E3E3","stroke-opacity":1})}},Y.scatterBase),FusionCharts.register("component",["dataset","zoomscatter",{type:"zoomscatter",configure:function(){var a,e,i,o,s,n,r;n=this.chart,o=n.jsonData.chart;var c=n.getFillColor,l=this.JSONData;this.__base__.configure.call(this),n=this.config,e=this.components,a=u(l.anchorbordercolor,o.anchorbordercolor),n.anchorBorderThickness=u(l.anchorborderthickness,o.anchorborderthickness,a?1:0),e.kDTree=new t,n.chunkSize=Math.floor(F((l.data||[]).length/5,5e4)),a=n.staticRadius=v(o.staticradius,0),n.radius=v(l.radius,l.anchorradius,o.radius,o.anchorradius,a?3:.5),r=n.showHoverEffect,a=y(u(l.plotfillhovercolor,l.hovercolor,o.plotfillhovercolor,o.hovercolor,n.anchorBgColor)),e=u(l.plotfillhoveralpha,l.hoveralpha,o.plotfillhoveralpha,o.hoveralpha,D),i=y(u(l.plotfillhovercolor,l.hovercolor,o.plotfillhovercolor,o.hovercolor,a)),s=u(l.plotfillhoveralpha,l.hoveralpha,o.plotfillhoveralpha,o.hoveralpha,D),o=v(l.borderhoverthickness,o.borderhoverthickness,1),n.hoverCosmetics={showHoverEffect:r,fill:c(a,e),borderColor:c(i,s),borderThickness:o},n.tooltip={toolTipVisible:n.showTooltip,seriesNameInToolTip:n.seriesNameInTooltip,toolTipSepChar:n.toolTipSepChar},n.lastViewPort={}},draw:function(t){var a,e,i;a=this.graphics,i=this.chart,e=i.components;var o=i.graphics.imageContainer,s=e.paper;i=i.config;var n=this.visible,r=i.viewPortConfig,c=this.config,l=c.lastViewPort||{},h=!1;a.container||(a.container=s.group("grid-container",o)),n&&this._conatinerHidden?this.show():n||this._conatinerHidden||this.hide(),t?this._pixelatedDraw():(l.scaleX===r.scaleX&&l.scaleY===r.scaleY||(l.scaleX=r.scaleX,l.scaleY=r.scaleY,t=e.xAxis[0],a=e.yAxis[0],e=t.getPVR(),t=a.getPVR(),i=C(c.zoomedRadius=F(c.staticRadius?c.radius:c.radius*F(r.scaleX,r.scaleY),i.canvasWidth/2,i.canvasHeight/2),2),this.components.kDTree._setSearchLimit(i/e,i/t),this._deleteGridImages(),this.graphics._grid={},h=!0),this._gridDraw(h))},_pixelatedDraw:function(){var t,a,e,i,o,s=this.chart.config;e=this.config,i=this.graphics;var n=e.drawLine,r=e.lastViewPort||{},c=r.scaleX,l=r.scaleY;o=s.viewPortConfig;var h=o.scaleX,g=o.scaleY,r=this.graphics._grid||(this.graphics._grid=[]),c=h/c,l=g/l,g=s.canvasWidth*c,s=s.canvasHeight*l;if(e=e._batchDarwTimers,i=i.container,clearTimeout(this.timer),e&&e.length)for(;e.length;)clearTimeout(e.shift());i.transform("t"+w(-o.x*o.scaleX)+","+w(-o.y*o.scaleY));for(t in r)if(o=r[t])for(a in o)(i=o[a])&&i.drawState&&(e=i.image,e.attr({x:i.xPixel*c,y:i.yPixel*l,width:g,height:s}),n&&(e=i.lineImage,e.attr({x:i.xPixel*c,y:i.yPixel*l,width:g,height:s})))},_deleteGridImages:function(){var t,a,e,i,o;a=this.config;var s=this.graphics,n=s._imagePool||(s._imagePool=[]),r=s._canvasPool||(s._canvasPool=[]),c=s._lineImagePool||(s._lineImagePool=[]),l=s._lineCanvasPool||(s._lineCanvasPool=[]),h=s._grid||[];if((a=a._batchDarwTimers)&&a.length)for(;a.length;)clearTimeout(a.shift());for(e in h)if(o=h[e])for(i in o)(a=o[i])&&a.drawState&&(t=a.image,t.attr({src:"",width:0,height:0}),n.push(t),delete a.image,t=a.canvas,r.push(t),delete a.canvas,delete a.ctx,t=a.lineImage)&&(t.attr({src:"",width:0,height:0}),c.push(t),delete a.lineImage,t=a.lineCanvas,l.push(t),delete a.lineCanvas,delete a.lineCtx);delete s._grid},_gridDraw:function(t){var a=this,e=a.graphics,i=a.config,o=a.chart.config.viewPortConfig;clearTimeout(i.timer),e.container.transform("t"+w(-o.x*o.scaleX)+","+w(-o.y*o.scaleY)),t?a._gridManager():i.timer=setTimeout(function(){a._gridManager()},10)},_gridManager:function(){var t,a,e,i,o,s,n,r,c,l=this,h=l.config,g=l.graphics._grid,d=h._drawGrid||(h._drawGrid=[]),u=l.chart,v=u.config,p=u.components;o=v.viewPortConfig,s=o.scaleX;var m=o.scaleY;n=Math.ceil(m),i=Math.ceil(s);var u=v.canvasWidth,v=v.canvasHeight,f=p.xAxis[0],x=p.yAxis[0],y=f.config,b=x.config,p=y.axisRange.min,y=y.axisRange.max,T=b.axisRange.min,b=b.axisRange.max,_=(y-p)/s,w=(b-T)/m;a=h.radius*F(o.scaleX,o.scaleY)+h.plotCosmetics.borderWidth,f=L(a/(u*o.scaleX/(f.max-f.min))),x=L(a/(v*o.scaleY/(x.max-x.min))),a=u/s,c=v/m,t=F(1,a/10,c/10);var m={},E=[];for(s=o.x+t,a=o.x-t+a,r=o.y+t,t=o.y+c-t,o=l._getFocusedGrid(s,r),c=m[o.row]||(m[o.row]={}),c[o.col]=!0,o=l._getFocusedGrid(a,r),c=m[o.row]||(m[o.row]={}),c[o.col]=!0,o=l._getFocusedGrid(a,t),c=m[o.row]||(m[o.row]={}),c[o.col]=!0,o=l._getFocusedGrid(s,t),c=m[o.row]||(m[o.row]={}),c[o.col]=!0,s=l._getFocusedGrid(),o=s.row,s=s.col,a=C(o-1,0),o=F(o+1,n-1),n=C(s-1,0),s=F(s+1,i-1),i=b-a*w,r=a;o>=r;r+=1){for(g[r]||(g[r]={}),a=p+n*_,c=n;s>=c;c+=1)t=g[r][c],t||(e=C(i-w,T),t=F(a+_,y),t=g[r][c]={xPixel:c*u,yPixel:r*v,xMinValue:a,yMinValue:e,xMaxValue:t,yMaxValue:i,drawState:0,xMinWPad:C(a-f,p),yMinWPad:C(e-x,T),xMaxWPad:F(t+f,y),yMaxWPad:F(i+x,b)}),t.drawState||(m[r]&&m[r][c]?d.push({row:r,col:c}):E.push({row:r,col:c})),a+=_;i-=w}(d.length||E.length)&&l._drawGridArr(function(){h._drawGrid=E,l._drawGridArr()})},_getFocusedGrid:function(t,a){var e=this.chart.config,i=e.viewPortConfig,o=e.canvasWidth/i.scaleX,e=e.canvasHeight/i.scaleY,s=isNaN(t)?i.x+o/2:t,i=isNaN(a)?i.y+e/2:a;return{row:P(i/e),col:P(s/o)}},_drawGridArr:function(t){var a,e,i,o,s=this.chart,n=s.config,r=n.viewPortConfig,c=this.config,h=c.drawLine,g=c._drawGrid,d=[],u=this.graphics.container,s=s.components.paper,v=n.canvasWidth,n=n.canvasHeight,p=this.graphics._grid,m=this.graphics._imagePool||[],f=this.graphics._canvasPool||[],x=this.graphics._lineImagePool||[],y=this.graphics._lineCanvasPool||[],b=c.plotCosmetics,r=c.radius*F(r.scaleX,r.scaleY);if(g.length){for(;g.length;)a=g.shift(),a=p[a.row][a.col],2!==a.drawState&&(a.drawState=2,h&&(a.lineImage=x.length?x.shift():s.image("",u),a.lineImage.attr({x:a.xPixel,y:a.yPixel,width:v,height:n}),a.lineCanvas=i=f.length?y.shift():l.document.createElement("canvas"),i.setAttribute("width",v),i.setAttribute("height",n),o=a.lineCtx=i.getContext("2d"),o.fillStyle=b.fillStyle,o.strokeStyle=b.lineStrokeStyle,o.lineWidth=b.lineWidth),a.image=m.length?m.shift():s.image("",u),a.image.attr({x:a.xPixel,y:a.yPixel,width:v,height:n}),a.canvas=e=f.length?f.shift():l.document.createElement("canvas"),e.setAttribute("width",v),e.setAttribute("height",n),o=a.ctx=e.getContext("2d"),1>r?(o.strokeStyle=b.fillStyle,o.lineWidth=.5):(o.fillStyle=b.fillStyle,o.strokeStyle=b.strokeStyle,o.lineWidth=b.borderWidth),d.push(a));c._batchDrawindex=this.JSONData.data&&this.JSONData.data.length-1||0,this._drawGridArrBatch(d,t,!c.animation.enabled)}else t&&t()},_drawGridArrBatch:function(t,a,e){var i,o,s,n,r,c,l,h,g,d,u,v,p,m,f,x,y=this;c=y.config;var b=y.chart.components;x=y.config;var T=x.drawLine;h=x.plotCosmetics,n=x._batchDrawindex,s=y.components.data,r=n-x.chunkSize;var _=b.yAxis[0],F=x.zoomedRadius,b=b.xAxis[0].getPVR(),_=_.getPVR(),C=c.showRegressionLine,L=x._store||[],E=h.lineWidth||1>F;for(C&&(m=c.regLineColor,f=c.regressionLineThickness),h=0;h<t.length;h+=1)t[h].ctx.beginPath(),T&&t[h].lineCtx.beginPath();for(r=0>=r?0:r;n>=r;--n)if((u=s[n]&&s[n].config.setValue)&&!isNaN(u.x)&&!isNaN(u.y))for(h=0;h<t.length;h+=1)i=t[h],v=i.xMinValue,p=i.yMaxValue,u.x<i.xMinWPad||u.x>i.xMaxWPad||u.y<i.yMinWPad||u.y>i.yMaxWPad||(g=i.ctx,d=i.lineCtx,i=w((u.x-v)*b),o=w((p-u.y)*_),(l=L[i])||(l=L[i]={}),l[o])||(l[o]=!0,T&&(l=n-1>=0&&s[n-1].config.setValue)&&(d.moveTo(w((l.x-v)*b),w((p-l.y)*_)),d.lineTo(i,o)),1>F?(g.moveTo(i,o),g.lineTo(i+1,o)):(g.moveTo(i+F,o),g.arc(i,o,F,0,S)));for(h=0;h<t.length;h+=1)i=t[h],g=i.ctx,g.fill(),E&&g.stroke(),g.closePath(),T&&(d=i.lineCtx,d.fill(),E&&d.stroke(),d.closePath());if(x._batchDrawindex=n,n>=0){if(!e)for(h=0;h<t.length;h+=1)g=t[h].image,s=t[h].canvas,g.attr({src:s.toDataURL("image/png")}),x.drawLine&&(m=t[h].lineImage,f=t[h].lineCanvas,m.attr({src:f.toDataURL("image/png")}));(x._batchDarwTimers||(x._batchDarwTimers=[])).push(setTimeout(function(){y.chart&&y._drawGridArrBatch(t,a,e)},0))}else{if(delete x._store,C)for(x=c.regressionData,h=0;h<t.length;h+=1)i=t[h],n=i.xMinValue,c=i.yMaxValue,g=i.image,s=i.canvas,g=i.ctx,s=(x[0].x-n)*b,r=(c-x[0].y)*_,n=(x[1].x-n)*b,c=(c-x[1].y)*_,g.beginPath(),g.strokeStyle=m,g.lineWidth=f,g.moveTo(s,r),g.lineTo(n,c),g.stroke(),g.closePath();for(h=0;h<t.length;h+=1)i=t[h],g=i.image,s=i.canvas,i.drawState=1,g.attr({src:s.toDataURL("image/png")}),T&&(m=i.lineImage,f=i.lineCanvas,m.attr({src:f.toDataURL("image/png")}));y.tree||setTimeout(function(){y._buildKdTree()},250),a&&a()}},_buildKdTree:function(){var a=this.config;a._kdPoints=(this.JSONData.data||[]).slice(),this.components.kDTree||(this.components.kDTree=new t),this.components.kDTree.buildKdTree(a._kdPoints),delete a._kdPoints},getElement:function(t){return this.components.kDTree?this.components.kDTree.getNeighbour(t):void 0},show:function(){var t=this.graphics,t=t&&t.container;this.visible=!0,this._conatinerHidden=!1,t.show()},hide:function(){var t=this.graphics,t=t&&t.container;this.visible=!1,this._conatinerHidden=!0,t.hide()},_addLegend:function(){var t=this.chart,a=t.jsonData.chart,e=this.config,i=this.JSONData,o=t.getFillColor,s=u(i.anchorbordercolor,a.anchorbordercolor),n=y(u(s,e.plotBorderColor)),s=v(i.anchorborderthickness,a.anchorborderthickness,s?1:0),r=y(u(i.anchorbgcolor,i.color,a.anchorbgcolor,e.plotColor)),c=u(i.anchoralpha,i.alpha,a.anchoralpha,D),a=u(i.anchorbgalpha,i.alpha,a.anchorbgalpha,D),i={color:e.lineColor,alpha:e.lineAlpha},o=e.plotCosmetics={fillStyle:o(r,c*a/100),strokeStyle:o(n,c),borderWidth:s,lineWidth:e.lineThickness,lineStrokeStyle:m(i)};this.legendItemId=t.components.legend.addItems(this,this.legendInteractivity,{enabled:e.includeInLegend,type:this.type,fillColor:o.fillStyle,strokeColor:o.strokeStyle,anchorSide:2,strokeWidth:e.anchorBorderThickness,label:p(this.JSONData.seriesname)})},_setConfigure:function(){var t,a,e,i,n,r,c,l,h,g=-(1/0),p=1/0,m=1/0,f=-(1/0),x=this.components.data||(this.components.data=[]);t=this.chart;var y=o.parseUnsafeString,b=this.config,T=this.JSONData,_=t.jsonData.chart,w=T.data||[],L=w.length,E=t.components.numberFormatter,k=y(_.yaxisname),P=y(_.xaxisname),S=b.lineDashed,M=b.lineDashStyle,X=b.parentYAxis,Y=b.toolTipSepChar,D=b.seriesname;for(t=0;L>t;t+=1)i=w[t],e=x[t]||(x[t]={}),a=e.config||(e.config={}),a.setValue=n={x:E.getCleanValue(i.x),y:E.getCleanValue(i.y),index:t},f=C(f,n.x),m=F(m,n.x),g=C(g,n.y),p=F(p,n.y),b.showRegressionLine&&this.pointValueWatcher(n.x,n.y,b.regressionObj),a.setLink=u(i.link),a.anchorProps=this._parseAnchorProperties(t),a.showValue=v(i.showvalue,b.showValues),a.dashed=v(i.dashed,S),a.color=u(i.color,b.lineColor),a.alpha=u(i.alpha,b.lineAlpha),a.dashStyle=a.dashed?M:"none",a.toolTipValue=r=E.dataLabels(n.y,X),a.setDisplayValue=h=y(i.displayvalue),l=a.formatedVal=u(i.toolTipValue,E.dataLabels(n.y,X)),c=E.xAxis(n.x),a.displayValue=u(h,r),a.setTooltext=o.getValidValue(y(u(i.tooltext,b.plotToolText))),b.showTooltip?void 0!==a.setTooltext?(n=[4,5,6,7,8,9,10,11],c={yaxisName:k,xaxisName:P,yDataValue:l,xDataValue:c},i=s(a.setTooltext,n,c,i,_,T)):null===l?i=!1:(i=D?D+Y:d,i+=n.x?c+Y:d,i+=r):i=!1,a.toolText=i,e?e.graphics||(x[t].graphics={}):e=x[t]={graphics:{}},a.hoverEffects=this._parseHoverEffectOptions(e),a.anchorProps.isAnchorHoverRadius=a.hoverEffects.anchorRadius;b.xMax=f,b.xMin=m,b.yMin=p,b.yMax=g,b.showRegressionLine&&(b.regressionData=this.getRegressionLineSeries(b.regressionObj,b.showYOnX,L)),this.ErrorValueConfigure&&this.ErrorValueConfigure()}},"Scatter"]),a=function(t,a){
return t.x-a.x},e=function(t,a){return t.y-a.y},t.prototype={buildKdTree:function(t){this.tree=this._buildKdTree(t,!1)},getNeighbour:function(t){var a=this.tree,e={x1:t.x-this.xLimit,x2:t.x+this.xLimit,y1:t.y-this.yLimit,y2:t.y+this.yLimit};return t=this._getIsWithinLimitFn(t),a?this._searchBtwnLimit(e,a,!1,t):void 0},_getIsWithinLimitFn:function(t){var a=this;return function(e){return!!(e&&1>=Math.pow((e.x-t.x)/a.xLimit,2)+Math.pow((e.y-t.y)/a.yLimit,2))}},_compair2closest:function(t,a){return t?a&&a.i>t.i?a:t:a},_searchBtwnLimit:function(t,a,e,i){var o,s,n,r;n=e?"x":"y";var c=e?t.x1:t.y1,l=e?t.x2:t.y2;return a?(o=a.point1?a.point1[n]:l,s=a.point2?a.point2[n]:l,n=a.point3?a.point3[n]:l,i(a.point1)&&(r=this._compair2closest(r,a.point1)),o>=c&&a.left&&(r=this._compair2closest(r,this._searchBtwnLimit(t,a.left,!e,i))),l>=o&&a.middle1&&(i(a.point2)&&(r=this._compair2closest(r,a.point2)),s>=c&&(r=this._compair2closest(r,this._searchBtwnLimit(t,a.middle1,!e,i))),l>=s&&a.middle2&&(i(a.point3)&&(r=this._compair2closest(r,a.point3)),n>=c&&(r=this._compair2closest(r,this._searchBtwnLimit(t,a.middle2,!e,i))),l>=n&&a.right&&(r=this._compair2closest(r,this._searchBtwnLimit(t,a.right,!e,i))))),r):void 0},_buildKdTree:function(t,i){var o,s,n;return(o=t&&t.length)?(t.sort(i?a:e),o>7?(o=Math.floor(o/4),s=2*(o+1)-1,n=3*(o+1)-1,{left:this._buildKdTree(t.slice(0,o),!i),point1:t[o],middle1:this._buildKdTree(t.slice(o+1,s),!i),point2:t[s],middle2:this._buildKdTree(t.slice(s+1,n),!i),point3:t[n],right:this._buildKdTree(t.slice(n+1),!i)}):{left:o>=2?{point1:t[0]}:void 0,point1:o>=1?1===o?t[0]:t[1]:void 0,middle1:o>=3?{point1:t[2]}:void 0,point2:o>=4?t[3]:void 0,middle2:o>=5?{point1:t[4]}:void 0,point3:o>=6?t[5]:void 0,right:7==o?{point1:t[6]}:void 0}):void 0},_setSearchLimit:function(t,a){this.xLimit=t,this.yLimit=a}},t.prototype.constructor=t,n.addSymbol({zoomInIcon:function(t,a,e){t-=.2*e,a-=.2*e;var i=.8*e,o=n.rad(43),s=n.rad(48),r=t+i*E(o),o=a+i*k(o),c=t+i*E(s),s=a+i*k(s),l=n.rad(45),h=r+e*E(l),g=o+e*k(l),d=c+e*E(l)-1;return e=s+e*k(l)-1,["M",r,o,"A",i,i,0,1,0,c,s,"Z","M",r+1,o+1,"L",h,g,d,e,c+1,s+1,"Z","M",t-2,a,"L",t+2,a,"Z","M",t,a-2,"L",t,a+2,"Z"]},zoomModeIcon:function(t,a,e){var i=[];t-=.2*e,a-=.2*e;var o=.8*e,s=n.rad(43),r=n.rad(48),c=t+o*E(s),s=a+o*k(s),l=t+o*E(r),r=a+o*k(r),h=n.rad(45),g=c+e*E(h),d=s+e*k(h),u=l+e*E(h)-1;return e=r+e*k(h)-1,i=i.concat(["M",c,s,"A",o,o,0,1,0,l,r,"Z","M",c+1,s+1,"L",g,d,u,e,u+1,e-1,u+1.5,e+1.5,u-1,e+1,u,e,l+1,r+1,"Z","M",t-2,a,"L",t+2,a,"Z","M",t,a-2,"L",t,a+2,"Z"])},panModeIcon:function(t,a,e){var i=t-11.25,i=t;return e*=2.5,[].concat(["M",i-e/16,a-e/8,"L",i+e/16,a-e/8,"L",i+e/16,a-e/3.2,"L",i+6*e/32,a-10*e/32,"L",i,a-e/2,"L",i-6*e/32,a-10*e/32,"L",i-e/16,a-e/3.2,"Z","M",i+4*e/32,a-2*e/32,"L",i+10*e/32,a-2*e/32,"L",i+10*e/32,a-6*e/32,"L",i+16*e/32,a,"L",i+10*e/32,a+6*e/32,"L",i+10*e/32,a+2*e/32,"L",i+4*e/32,a+2*e/32,"Z","M",i+2*e/32,a+5*e/32,"L",i+2*e/32,a+10*e/32,"L",i+6*e/32,a+10*e/32,"L",i,a+16*e/32,"L",i-6*e/32,a+10*e/32,"L",i-2*e/32,a+10*e/32,"L",i-2*e/32,a+5*e/32,"Z","M",i-4*e/32,a-2*e/32,"L",i-10*e/32,a-2*e/32,"L",i-10*e/32,a-6*e/32,"L",i-16*e/32,a,"L",i-10*e/32,a+6*e/32,"L",i-10*e/32,a+2*e/32,"L",i-4*e/32,a+2*e/32,"Z"])}})}]);